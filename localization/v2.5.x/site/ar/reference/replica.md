---
id: replica.md
summary: تعرف على النسخ المتماثل في الذاكرة في ميلفوس.
title: النسخ المتماثل داخل الذاكرة
---

<h1 id="In-Memory-Replica" class="common-anchor-header">النسخ المتماثل داخل الذاكرة<button data-href="#In-Memory-Replica" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h1><p>يقدم هذا الموضوع آلية النسخ المتماثل داخل الذاكرة (النسخ المتماثل) في ميلفوس التي تتيح نسخ متماثلة متعددة المقاطع في الذاكرة العاملة لتحسين الأداء والتوافر.</p>
<p>للحصول على معلومات حول كيفية تكوين النسخ المتماثلة في الذاكرة، راجع <a href="/docs/ar/v2.5.x/configure_querynode.md#queryNodereplicas">التكوينات المتعلقة بالعقدة الاستعلامية</a>.</p>
<h2 id="Overview" class="common-anchor-header">نظرة عامة<button data-href="#Overview" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.5.x/assets/replica_availability.jpg" alt="Replica_Availiability" class="doc-image" id="replica_availiability" />
   </span> <span class="img-wrapper"> <span>إمكانية_النسخ المتماثل</span> </span></p>
<p>باستخدام النسخ المتماثلة داخل الذاكرة، يمكن لـ Milvus تحميل نفس المقطع على عقد استعلام متعددة. في حالة فشل عقدة استعلام واحدة أو انشغالها بطلب بحث حالي عند وصول عقدة استعلام أخرى، يمكن للنظام إرسال طلبات جديدة إلى عقدة استعلام خاملة لديها نسخة متماثلة لنفس المقطع.</p>
<h3 id="Performance" class="common-anchor-header">الأداء</h3><p>تسمح لك النسخ المتماثلة في الذاكرة بالاستفادة من موارد وحدة المعالجة المركزية والذاكرة الإضافية. وهي مفيدة جدًا إذا كانت لديك مجموعة بيانات صغيرة نسبيًا ولكنك ترغب في زيادة إنتاجية القراءة باستخدام موارد إضافية من الأجهزة. يمكن تحسين QPS (الاستعلام في الثانية) والإنتاجية بشكل كبير.</p>
<h3 id="Availability" class="common-anchor-header">التوافر</h3><p>تساعد النسخ المتماثلة في الذاكرة Milvus على التعافي بشكل أسرع في حالة تعطل عقدة الاستعلام. عندما تفشل عقدة استعلام، لا يلزم إعادة تحميل المقطع على عقدة استعلام أخرى. بدلاً من ذلك، يمكن إعادة إرسال طلب البحث إلى عقدة استعلام جديدة على الفور دون الحاجة إلى إعادة تحميل البيانات مرة أخرى. مع الاحتفاظ بنسخ متماثلة متعددة للمقاطع في وقت واحد، يكون النظام أكثر مرونة في مواجهة الفشل.</p>
<h2 id="Key-Concepts" class="common-anchor-header">المفاهيم الرئيسية<button data-href="#Key-Concepts" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يتم تنظيم النسخ المتماثلة في الذاكرة كمجموعات نسخ متماثلة. تحتوي كل مجموعة نسخ متماثلة على نسخ متماثلة <a href="https://milvus.io/docs/v2.1.x/glossary.md#Sharding">للجزء</a>. تحتوي كل نسخة متماثلة للجزء على نسخة متماثلة متدفقة ونسخة متماثلة تاريخية تتوافق مع <a href="https://milvus.io/docs/v2.1.x/glossary.md#Segment">الأجزاء</a> المتنامية والمغلقة في الجزء (أي قناة DML).</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.5.x/assets/replica_group.png" alt="An illustration of how in-memory replica works" class="doc-image" id="an-illustration-of-how-in-memory-replica-works" />
   </span> <span class="img-wrapper"> <span>رسم توضيحي لكيفية عمل النسخ المتماثلة داخل الذاكرة</span> </span></p>
<h3 id="Replica-group" class="common-anchor-header">مجموعة النسخ المتماثلة</h3><p>تتكون مجموعة النسخ المتماثلة من <a href="https://milvus.io/docs/v2.1.x/four_layers.md#Query-node">عقد استعلام</a> متعددة مسؤولة عن التعامل مع البيانات التاريخية والنسخ المتماثلة.</p>
<h3 id="Shard-replica" class="common-anchor-header">النسخة المتماثلة للجزء المتماثل</h3><p>تتألف النسخة المتماثلة للجزء من نسخة متماثلة متدفقة ونسخة متماثلة تاريخية، وكلاهما ينتميان إلى نفس <a href="https://milvus.io/blog/deep-dive-1-milvus-architecture-overview.md#Shard">الجزء</a>. يتم تحديد عدد النسخ المتماثلة للجزء في مجموعة النسخ المتماثلة من خلال عدد الأجزاء في مجموعة محددة.</p>
<h3 id="Streaming-replica" class="common-anchor-header">النسخة المتماثلة المتدفقة</h3><p>تحتوي النسخة المتماثلة المتدفقة على جميع <a href="https://milvus.io/docs/v2.1.x/glossary.md#Segment">الأجزاء المتزايدة</a> من نفس قناة DML. من الناحية الفنية، يجب تقديم نسخة متماثلة متدفقة بواسطة عقدة استعلام واحدة فقط في نسخة متماثلة واحدة.</p>
<h3 id="Historical-replica" class="common-anchor-header">النسخة المتماثلة التاريخية</h3><p>تحتوي النسخة المتماثلة التاريخية على جميع المقاطع المختومة من نفس قناة DML. يمكن توزيع المقاطع المختومة لنسخة متماثلة تاريخية واحدة على عدة عقد استعلام داخل نفس مجموعة النسخ المتماثلة.</p>
<h3 id="Shard-leader" class="common-anchor-header">قائد الجزء</h3><p>قائد الجزء هو عقدة الاستعلام التي تخدم النسخة المتماثلة المتدفقة في نسخة متماثلة للجزء.</p>
<h2 id="Design-Details" class="common-anchor-header">تفاصيل التصميم<button data-href="#Design-Details" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><h3 id="Balance" class="common-anchor-header">التوازن</h3><p>سيتم تخصيص مقطع جديد يحتاج إلى تحميله إلى عدة عقد استعلام مختلفة. يمكن معالجة طلب البحث بمجرد تحميل نسخة متماثلة واحدة على الأقل بنجاح.</p>
<h3 id="Search" class="common-anchor-header">البحث</h3><h4 id="Cache" class="common-anchor-header">ذاكرة التخزين المؤقت</h4><p>يحتفظ الوكيل بذاكرة تخزين مؤقت تقوم بتعيين المقاطع إلى عقد الاستعلام وتحديثها بشكل دوري. عندما يتلقى الوكيل طلبًا، يحصل ميلفوس على جميع المقاطع المختومة التي تحتاج إلى البحث من ذاكرة التخزين المؤقت ويحاول تعيينها إلى عقد الاستعلام بالتساوي.</p>
<p>بالنسبة للقطاعات المتزايدة، يحتفظ الوكيل أيضاً بذاكرة تخزين مؤقتة من قناة إلى عقدة استعلام ويرسل الطلبات إلى عقد الاستعلام المقابلة.</p>
<h4 id="Failover" class="common-anchor-header">تجاوز الفشل</h4><p>لا تكون ذاكرات التخزين المؤقت على الوكيل محدثة دائماً. قد تكون بعض المقاطع أو القنوات قد تم نقلها إلى عقد استعلام أخرى عند ورود طلب. في هذه الحالة، سيتلقى الوكيل رداً بالخطأ، وسيقوم بتحديث ذاكرة التخزين المؤقت ومحاولة تعيينها إلى عقدة استعلام أخرى.</p>
<p>سيتم تجاهل المقطع إذا تعذر على الوكيل العثور عليه بعد تحديث ذاكرة التخزين المؤقت. قد يحدث هذا إذا تم ضغط المقطع.</p>
<p>إذا كانت ذاكرة التخزين المؤقت غير دقيقة، فقد يفوت الوكيل بعض المقاطع. تقوم عقد الاستعلام مع قنوات DML (المقاطع المتزايدة) بإرجاع استجابات البحث مع قائمة بالمقاطع الموثوقة التي يمكن للوكيل مقارنتها وتحديث ذاكرة التخزين المؤقت بها.</p>
<h3 id="Enhancement" class="common-anchor-header">التحسين</h3><p>لا يمكن للوكيل تخصيص طلبات البحث لعقد الاستعلام بشكل متساوٍ تمامًا وقد يكون لعقد الاستعلام موارد مختلفة لخدمة طلبات البحث. لتجنب التوزيع طويل الذيل للموارد، سيقوم الوكيل بتعيين مقاطع نشطة على عقد استعلام أخرى إلى عقدة استعلام خاملة لديها هذه المقاطع أيضاً.</p>
