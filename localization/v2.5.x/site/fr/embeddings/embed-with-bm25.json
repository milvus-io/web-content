{"codeList":["pip install --upgrade pymilvus\npip install \"pymilvus[model]\"\n","from pymilvus.model.sparse.bm25.tokenizers import build_default_analyzer\nfrom pymilvus.model.sparse import BM25EmbeddingFunction\n\n# there are some built-in analyzers for several languages, now we use 'en' for English.\nanalyzer = build_default_analyzer(language=\"en\")\n\ncorpus = [\n    \"Artificial intelligence was founded as an academic discipline in 1956.\",\n    \"Alan Turing was the first person to conduct substantial research in AI.\",\n    \"Born in Maida Vale, London, Turing was raised in southern England.\",\n]\n\n# analyzer can tokenize the text into tokens\ntokens = analyzer(corpus[0])\nprint(\"tokens:\", tokens)\n","tokens: ['artifici', 'intellig', 'found', 'academ', 'disciplin', '1956']\n","# Use the analyzer to instantiate the BM25EmbeddingFunction\nbm25_ef = BM25EmbeddingFunction(analyzer)\n\n# Fit the model on the corpus to get the statstics of the corpus\nbm25_ef.fit(corpus)\n","docs = [\n    \"The field of artificial intelligence was established as an academic subject in 1956.\",\n    \"Alan Turing was the pioneer in conducting significant research in artificial intelligence.\",\n    \"Originating in Maida Vale, London, Turing grew up in the southern regions of England.\",\n    \"In 1956, artificial intelligence emerged as a scholarly field.\",\n    \"Turing, originally from Maida Vale, London, was brought up in the south of England.\"\n]\n\n# Create embeddings for the documents\ndocs_embeddings = bm25_ef.encode_documents(docs)\n\n# Print embeddings\nprint(\"Embeddings:\", docs_embeddings)\n# Since the output embeddings are in a 2D csr_array format, we convert them to a list for easier manipulation.\nprint(\"Sparse dim:\", bm25_ef.dim, list(docs_embeddings)[0].shape)\n","Embeddings:   (0, 0)        1.0208816705336425\n  (0, 1)        1.0208816705336425\n  (0, 3)        1.0208816705336425\n...\n  (4, 16)        0.9606986899563318\n  (4, 17)        0.9606986899563318\n  (4, 20)        0.9606986899563318\nSparse dim: 21 (1, 21)\n","queries = [\"When was artificial intelligence founded\", \n           \"Where was Alan Turing born?\"]\n\nquery_embeddings = bm25_ef.encode_queries(queries)\n\n# Print embeddings\nprint(\"Embeddings:\", query_embeddings)\n# Since the output embeddings are in a 2D csr_array format, we convert them to a list for easier manipulation.\nprint(\"Sparse dim:\", bm25_ef.dim, list(query_embeddings)[0].shape)\n","Embeddings:   (0, 0)        0.5108256237659907\n  (0, 1)        0.5108256237659907\n  (0, 2)        0.5108256237659907\n  (1, 6)        0.5108256237659907\n  (1, 7)        0.11554389108992644\n  (1, 14)        0.5108256237659907\nSparse dim: 21 (1, 21)\n"],"headingContent":"BM25","anchorList":[{"label":"BM25","href":"BM25","type":1,"isActive":false}]}