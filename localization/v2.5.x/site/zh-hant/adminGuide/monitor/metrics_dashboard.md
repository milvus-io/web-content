---
id: metrics_dashboard.md
title: Milvus 指標儀表板
summary: 本主題介紹 Milvus Dashboard 中顯示的監控指標。
---

<h1 id="Milvus-Metrics-Dashboard" class="common-anchor-header">Milvus 指標儀表板<button data-href="#Milvus-Metrics-Dashboard" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h1><p>Milvus 會在執行期間輸出詳細的時間序列指標清單。您可以使用<a href="https://prometheus.io/">Prometheus</a>和<a href="https://grafana.com/">Grafana</a>來視覺化這些指標。本主題介紹 Grafana Milvus Dashboard 中顯示的監控指標。</p>
<p>本主題中的時間單位為毫秒。而本主題中的「第 99 百分位數」是指 99% 的時間統計都控制在某個數值之內。</p>
<p>我們建議先閱讀<a href="/docs/zh-hant/v2.5.x/monitor_overview.md">Milvus 監控框架概述</a>，以瞭解 Prometheus 的度量指標。</p>
<p><details><summary>代理</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 公制</th><th>Milvus 測量指標說明</th></tr>
</thead>
<tbody>
<tr><td>查詢向量計數率</td><td>過去兩分鐘內，每個代理每秒查詢的向量平均數。</td><td><code translate="no">sum(increase(milvus_proxy_search_vectors_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_search_vectors_count</code></td><td>累積查詢的向量數量。</td></tr>
<tr><td>插入向量計數率</td><td>過去兩分鐘內，每個代理平均每秒插入的向量數量。</td><td><code translate="no">sum(increase(milvus_proxy_insert_vectors_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_insert_vectors_count</code></td><td>插入向量的累積數量。</td></tr>
<tr><td>搜尋延遲</td><td>過去兩分鐘內，每個代理伺服器接收搜尋與查詢要求的平均延遲時間，以及延遲時間的第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_proxy_sq_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_latency</code></td><td>搜尋與查詢要求的延遲時間。</td></tr>
<tr><td>集合搜尋延遲</td><td>每個代理在過去兩分鐘內接收特定資料集的搜尋和查詢請求的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_collection_sq_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_proxy_collection_sq_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_collection_sq_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_collection_sq_latency_sum</code></td><td>搜尋和查詢要求到特定集合的延遲時間</td></tr>
<tr><td>突變延遲</td><td>過去兩分鐘內每個代理接收突變請求的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, msg_type, pod, node_id) (rate(milvus_proxy_mutation_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_proxy_mutation_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type) / sum(increase(milvus_proxy_mutation_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type)</code></td><td><code translate="no">milvus_proxy_mutation_latency_sum</code></td><td>突變請求的延遲時間。</td></tr>
<tr><td>收集突變延遲</td><td>每個代理在過去兩分鐘內接收到特定集合的突變請求的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_collection_sq_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_proxy_collection_sq_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_collection_sq_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_collection_sq_latency_sum</code></td><td>對特定集合提出突變請求的延遲時間</td></tr>
<tr><td>等待搜尋結果的延遲</td><td>代理在過去兩分鐘內傳送搜尋和查詢請求與接收結果之間的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_wait_result_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_proxy_sq_wait_result_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_wait_result_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_wait_result_latency</code></td><td>傳送搜尋和查詢要求與接收結果之間的延遲。</td></tr>
<tr><td>減少搜尋結果延遲</td><td>在過去兩分鐘內，透過代理匯集搜尋和查詢結果的平均延遲時間和第 99 百分位數的延遲時間。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_reduce_result_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_proxy_sq_reduce_result_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_reduce_result_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_reduce_result_latency</code></td><td>每個查詢節點彙總搜尋與查詢結果的延遲時間。</td></tr>
<tr><td>解碼搜尋結果的延遲</td><td>在過去兩分鐘內，由代理解碼搜尋和查詢結果的平均延遲時間和第 99 百分位數的延遲時間。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_decode_result_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_proxy_sq_decode_result_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_decode_resultlatency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_decode_result_latency</code></td><td>解碼每個搜尋與查詢結果的延遲時間。</td></tr>
<tr><td>Msg Stream Object Num</td><td>過去兩分鐘內，每個代理在其對應的實體主題上建立的 msgstream 物件的平均、最大及最小數量。</td><td><code translate="no">avg(milvus_proxy_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) max(milvus_proxy_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) min(milvus_proxy_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_msgstream_obj_num</code></td><td>在每個實體主題上建立的 msgstream 物件數量。</td></tr>
<tr><td>突發傳送延遲</td><td>每個代理伺服器在過去兩分鐘內傳送插入或刪除請求的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, msg_type, pod, node_id) (rate(milvus_proxy_mutation_send_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_proxy_mutation_send_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type) / sum(increase(milvus_proxy_mutation_send_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type)</code></td><td><code translate="no">milvus_proxy_mutation_send_latency</code></td><td>傳送插入或刪除請求的延遲時間。</td></tr>
<tr><td>快取記憶體命中率</td><td>過去兩分鐘內，包括<code translate="no">GeCollectionID</code> 、<code translate="no">GetCollectionInfo</code> 及<code translate="no">GetCollectionSchema</code> 在內的每秒平均快取記憶體命中率。</td><td><code translate="no">sum(increase(milvus_proxy_cache_hit_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, cache_state=&quot;hit&quot;}[2m])/120) by(cache_name, pod, node_id) / sum(increase(milvus_proxy_cache_hit_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by(cache_name, pod, node_id)</code></td><td><code translate="no">milvus_proxy_cache_hit_count</code></td><td>每個快取記憶體讀取作業的命中率和失敗率統計。</td></tr>
<tr><td>快取更新延遲</td><td>過去兩分鐘內，各代理的快取更新平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_proxy_cache_update_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_proxy_cache_update_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id) / sum(increase(milvus_proxy_cache_update_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_cache_update_latency</code></td><td>每次更新快取記憶體的延遲時間。</td></tr>
<tr><td>同步時間</td><td>每個代理伺服器在其對應的實體通道中同步的平均、最大和最小時間。</td><td><code translate="no">avg(milvus_proxy_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) max(milvus_proxy_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) min(milvus_proxy_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_sync_epoch_time</code></td><td>每個實體通道的 epoch time (Unix 時間，自 1970 年 1 月 1 日起經過的毫秒數)。    <br/>    除了實體通道之外，還有預設的<code translate="no">ChannelName</code> 。</td></tr>
<tr><td>套用 PK 延遲</td><td>過去兩分鐘內每個代理的平均延遲時間和主索引鍵應用延遲時間的第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_proxy_apply_pk_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_proxy_apply_pk_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id) / sum(increase(milvus_proxy_apply_pk_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_apply_pk_latency</code></td><td>應用主索引鍵的延遲。</td></tr>
<tr><td>套用時間戳延遲</td><td>過去兩分鐘內，每個代理伺服器應用 Timestamp 應用延遲的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_proxy_apply_timestamp_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_proxy_apply_timestamp_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id) / sum(increase(milvus_proxy_apply_timestamp_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_apply_timestamp_latency</code></td><td>套用時間戳的延遲。</td></tr>
<tr><td>請求成功率</td><td>每個代理每秒收到的成功請求數目，每個請求類型的詳細明細。可能的請求類型包括 DescribeCollection、DescribeIndex、GetCollectionStatistics、HasCollection、Search、Query、ShowPartitions、Insert 等。</td></tr>
<tr><td><code translate="no">sum(increase(milvus_proxy_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, status=&quot;success&quot;}[2m])/120) by(function_name, pod, node_id)</code></td><td><code translate="no">milvus_proxy_req_count</code></td><td>所有類型的接收要求數量</td></tr>
<tr><td>請求失敗率</td><td>每個代理每秒收到的失敗請求數目，並詳細列出每種請求類型。可能的請求類型有：DescribeCollection、DescribeIndex、GetCollectionStatistics、HasCollection、Search、Query、ShowPartitions、Insert 等。</td></tr>
<tr><td><code translate="no">sum(increase(milvus_proxy_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, status=&quot;fail&quot;}[2m])/120) by(function_name, pod, node_id)</code></td><td><code translate="no">milvus_proxy_req_count</code></td><td>所有類型的接收要求數量</td></tr>
<tr><td>請求延遲</td><td>每個代理接收所有類型要求的平均延遲時間和第 99 百分位數</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id, function_name) (rate(milvus_proxy_req_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_proxy_req_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, function_name) / sum(increase(milvus_proxy_req_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, function_name)</code></td><td><code translate="no">milvus_proxy_req_latency</code></td><td>所有類型接收請求的延遲</td></tr>
<tr><td>插入/刪除要求位元組率</td><td>代理伺服器在過去兩分鐘內每秒收到的插入和刪除請求的位元組數量。</td><td><code translate="no">sum(increase(milvus_proxy_receive_bytes_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by(pod, node_id)</code></td><td><code translate="no">milvus_proxy_receive_bytes_count</code></td><td>插入和刪除請求的計數。</td></tr>
<tr><td>傳送位元組率</td><td>每個代理伺服器在過去兩分鐘內回應搜尋和查詢要求時，每秒傳回給用戶端的位元組數量。</td><td><code translate="no">sum(increase(milvus_proxy_send_bytes_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by(pod, node_id)</code></td><td><code translate="no">milvus_proxy_send_bytes_count</code></td><td>每個代理伺服器回應搜尋和查詢要求時，傳回給用戶端的位元組數量。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>根協調者</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 度量</th><th>Milvus 公制描述</th></tr>
</thead>
<tbody>
<tr><td>代理節點數</td><td>建立的代理數目。</td><td><code translate="no">sum(milvus_rootcoord_proxy_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_proxy_num</code></td><td>代理的數量。</td></tr>
<tr><td>同步時間</td><td>每個實體通道 (PChannel) 中每個根協定同步的平均、最大和最小歷時。</td><td><code translate="no">avg(milvus_rootcoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) max(milvus_rootcoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) min(milvus_rootcoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_sync_epoch_time</code></td><td>每個實體通道的 epoch time (Unix 時間，自 1970 年 1 月 1 日起經過的毫秒數)。</td></tr>
<tr><td>DDL 請求率</td><td>過去兩分鐘內每秒 DDL 請求的狀態和次數。</td><td><code translate="no">sum(increase(milvus_rootcoord_ddl_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, function_name)</code></td><td><code translate="no">milvus_rootcoord_ddl_req_count</code></td><td>DDL 請求的總數，包括<code translate="no">CreateCollection</code>,<code translate="no">DescribeCollection</code>,<code translate="no">DescribeSegments</code>,<code translate="no">HasCollection</code>,<code translate="no">ShowCollections</code>,<code translate="no">ShowPartitions</code>, 和<code translate="no">ShowSegments</code> 。</td></tr>
<tr><td>DDL 請求延遲</td><td>過去兩分鐘內 DDL 請求延遲的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, function_name) (rate(milvus_rootcoord_ddl_req_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_rootcoord_ddl_req_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (function_name) / sum(increase(milvus_rootcoord_ddl_req_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (function_name)</code></td><td><code translate="no">milvus_rootcoord_ddl_req_latency</code></td><td>所有類型 DDL 請求的延遲。</td></tr>
<tr><td>同步計時延遲</td><td>過去兩分鐘內，root coord 將所有時間戳記同步至 PChannel 所使用時間的平均延遲和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_rootcoord_sync_timetick_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_rootcoord_sync_timetick_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_rootcoord_sync_timetick_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m]))</code></td><td><code translate="no">milvus_rootcoord_sync_timetick_latency</code></td><td>根協調同步所有時間戳記到 PChannel 所使用的時間。</td></tr>
<tr><td>ID 分配率</td><td>過去兩分鐘內，每秒由 root coord 指派的 ID 數量。</td><td><code translate="no">sum(increase(milvus_rootcoord_id_alloc_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120)</code></td><td><code translate="no">milvus_rootcoord_id_alloc_count</code></td><td>根目錄分配的 ID 累積數量。</td></tr>
<tr><td>時間戳記</td><td>根目錄的最新時間戳記。</td><td><code translate="no">milvus_rootcoord_timestamp{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}</code></td><td><code translate="no">milvus_rootcoord_timestamp</code></td><td>根目錄的最新時間戳記。</td></tr>
<tr><td>儲存的時間戳記</td><td>根目錄儲存於元儲存的預先指定時間戳記。</td><td><code translate="no">milvus_rootcoord_timestamp_saved{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}</code></td><td><code translate="no">milvus_rootcoord_timestamp_saved</code></td><td>根目錄儲存於元儲存的預先指定時間戳記。     <br/>    時間戳提前 3 秒指定。時間戳每 50 毫秒更新一次，並儲存在元儲存器中。</td></tr>
<tr><td>集合總數</td><td>集合的總數。</td><td><code translate="no">sum(milvus_rootcoord_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_collection_num</code></td><td>目前 Milvus 中存在的集合總數。</td></tr>
<tr><td>分區數目</td><td>分區的總數。</td><td><code translate="no">sum(milvus_rootcoord_partition_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_partition_num</code></td><td>目前 Milvus 中存在的分區總數。</td></tr>
<tr><td>DML 通道數目</td><td>DML 通道的總數。</td><td><code translate="no">sum(milvus_rootcoord_dml_channel_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_dml_channel_num</code></td><td>目前 Milvus 中存在的 DML 通道總數。</td></tr>
<tr><td>訊息流總數</td><td>msgstreams 的總數。</td><td><code translate="no">sum(milvus_rootcoord_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_msgstream_obj_num</code></td><td>Milvus 目前的 msgstreams 總數。</td></tr>
<tr><td>憑證總數</td><td>憑證總數。</td><td><code translate="no">sum(milvus_rootcoord_credential_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_credential_num</code></td><td>Milvus 目前的憑證總數。</td></tr>
<tr><td>時間延遲</td><td>所有資料節點和查詢節點上流量圖的最大時間延遲總和。</td><td><code translate="no">sum(milvus_rootcoord_time_tick_delay{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_time_tick_delay</code></td><td>每個 DataNode 和 QueryNode 上流量圖的最大時間刻度延遲。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>查詢協調器</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 度量</th><th>Milvus 公制描述</th></tr>
</thead>
<tbody>
<tr><td>已載入的集合數目</td><td>目前載入記憶體的集合數量。</td><td><code translate="no">sum(milvus_querycoord_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_collection_num</code></td><td>Milvus 目前載入的集合數量。</td></tr>
<tr><td>已載入的實體數目</td><td>目前載入記憶體的實體數量。</td><td><code translate="no">sum(milvus_querycoord_entity_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_entitiy_num</code></td><td>Milvus 目前載入的實體數量。</td></tr>
<tr><td>載入要求率</td><td>過去兩分鐘內每秒載入要求的次數。</td><td><code translate="no">sum(increase(milvus_querycoord_load_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])120) by (status)</code></td><td><code translate="no">milvus_querycoord_load_req_count</code></td><td>累積的載入要求數量。</td></tr>
<tr><td>釋放要求率</td><td>過去兩分鐘內每秒釋放要求的數量。</td><td><code translate="no">sum(increase(milvus_querycoord_release_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status)</code></td><td><code translate="no">milvus_querycoord_release_req_count</code></td><td>釋放要求的累積數目。</td></tr>
<tr><td>負載要求延遲</td><td>過去兩分鐘內負載要求延遲的平均延遲和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_querycoord_load_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querycoord_load_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_querycoord_load_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m]))</code></td><td><code translate="no">milvus_querycoord_load_latency</code></td><td>完成負載請求所用的時間。</td></tr>
<tr><td>釋放請求延遲</td><td>過去兩分鐘內釋放要求延遲的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_querycoord_release_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_querycoord_release_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_querycoord_release_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m]))</code></td><td><code translate="no">milvus_querycoord_release_latency</code></td><td>完成釋放要求所用的時間。</td></tr>
<tr><td>次負載任務</td><td>次負載任務的數量。</td><td><code translate="no">sum(milvus_querycoord_child_task_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_child_task_num</code></td><td>子負載任務的數量。    <br/>    查詢協定會將負載請求分割為多個子負載任務。</td></tr>
<tr><td>父載入任務</td><td>父載入任務的數量。</td><td><code translate="no">sum(milvus_querycoord_parent_task_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_parent_task_num</code></td><td>子負載任務的數量。    <br/>    每個負載請求對應任務佇列中的父任務。</td></tr>
<tr><td>子負載任務延遲</td><td>子負載任務在過去兩分鐘內的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_querycoord_child_task_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querycoord_child_task_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_querycoord_child_task_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) namespace&quot;}[2m])))</code></td><td><code translate="no">milvus_querycoord_child_task_latency</code></td><td>完成次負載任務的延遲時間。</td></tr>
<tr><td>查詢節點數</td><td>查詢協調器管理的查詢節點數目。</td><td><code translate="no">sum(milvus_querycoord_querynode_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_querynode_num</code></td><td>查詢協調器管理的查詢節點數。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>查詢節點</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 度量</th><th>Milvus 測量指標說明</th></tr>
</thead>
<tbody>
<tr><td>載入的集合數目</td><td>每個查詢節點載入記憶體的集合數量。</td><td><code translate="no">sum(milvus_querynode_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_collection_num</code></td><td>每個查詢節點載入的集合數量。</td></tr>
<tr><td>載入的分割數目</td><td>每個查詢節點載入記憶體的分割數目。</td><td><code translate="no">sum(milvus_querynode_partition_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_partition_num</code></td><td>每個查詢節點載入的分割數目。</td></tr>
<tr><td>載入的區段數目</td><td>每個查詢節點載入記憶體的區段數目。</td><td><code translate="no">sum(milvus_querynode_segment_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_segment_num</code></td><td>每個查詢節點載入的區段數目。</td></tr>
<tr><td>可查詢的實體數目</td><td>每個查詢節點上可查詢及可搜尋的實體數目。</td><td><code translate="no">sum(milvus_querynode_entity_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_entity_num</code></td><td>每個查詢節點上可查詢及可搜尋的實體數目。</td></tr>
<tr><td>DML 虛擬通道</td><td>每個查詢節點監視的 DML 虛擬通道數量。</td><td><code translate="no">sum(milvus_querynode_dml_vchannel_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_dml_vchannel_num</code></td><td>每個查詢節點監視的 DML 虛擬通道數量。</td></tr>
<tr><td>Delta 虛擬通道</td><td>每個查詢節點監視的 delta 通道數量。</td><td><code translate="no">sum(milvus_querynode_delta_vchannel_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_delta_vchannel_num</code></td><td>每個查詢節點所看管的 delta 通道數量。</td></tr>
<tr><td>消費者數目</td><td>每個查詢節點的 Consumer 數量。</td><td><code translate="no">sum(milvus_querynode_consumer_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_consumer_num</code></td><td>每個查詢節點中的消費者數量。</td></tr>
<tr><td>搜尋要求率</td><td>每個查詢節點每秒收到的搜尋和查詢請求總數，以及過去兩分鐘內成功搜尋和查詢請求的數目。</td><td><code translate="no">sum(increase(milvus_querynode_sq_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (query_type, status, pod, node_id)</code></td><td><code translate="no">milvus_querynode_sq_req_count</code></td><td>累積的搜尋與查詢請求次數。</td></tr>
<tr><td>搜尋要求延遲</td><td>每個查詢節點在過去兩分鐘內搜尋和查詢請求所用時間的平均延遲時間和第 99 百分位數。    <br/>    此面板顯示狀態為 「成功 」或 「總計 」的搜尋和查詢請求的延遲時間。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_sq_req_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_sq_req_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_req_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_req_latency</code></td><td>查詢節點的搜尋要求延遲。</td></tr>
<tr><td>搜尋在佇列中的延遲</td><td>過去兩分鐘內佇列中的搜尋與查詢請求的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id, query_type) (rate(milvus_querynode_sq_queue_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_sq_queue_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_queue_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_queue_latency</code></td><td>查詢節點收到的搜尋和查詢請求的延遲時間。</td></tr>
<tr><td>搜尋段延遲</td><td>每個查詢節點在過去兩分鐘內搜尋和查詢網段所花時間的平均延遲時間和第 99 百分位數。    <br/>    區段的狀態可以是封閉或成長。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, segment_state, pod, node_id) (rate(milvus_querynode_sq_segment_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_querynode_sq_segment_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type, segment_state) / sum(increase(milvus_querynode_sq_segment_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type, segment_state)</code></td><td><code translate="no">milvus_querynode_sq_segment_latency</code></td><td>每個查詢節點搜尋和查詢每個區段所花的時間。</td></tr>
<tr><td>Segcore 請求延遲</td><td>過去兩分鐘內，每個查詢節點在 segcore 中搜尋和查詢所花時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_querynode_sq_core_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_sq_core_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_core_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_core_latency</code></td><td>每個查詢節點在 segcore 中搜尋與查詢所花費的時間。</td></tr>
<tr><td>搜尋縮短延遲</td><td>過去兩分鐘內，每個查詢節點在搜尋或查詢的還原階段所用時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id, query_type) (rate(milvus_querynode_sq_reduce_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_sq_reduce_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_reduce_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_reduce_latency</code></td><td>每個查詢在 reduce 階段所花費的時間。</td></tr>
<tr><td>負載分段延遲</td><td>每個查詢節點在過去兩分鐘內載入一個區段所花時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_load_segment_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_load_segment_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_load_segment_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>每個查詢節點載入一個區段所花的時間。</td></tr>
<tr><td>流程圖數</td><td>每個查詢節點中的 flowgraph 數量。</td><td><code translate="no">sum(milvus_querynode_flowgraph_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_flowgraph_num</code></td><td>每個查詢節點中的 flowgraph 數量。</td></tr>
<tr><td>未解決的讀取任務長度</td><td>每個查詢節點中未解決的讀取要求佇列的長度。</td><td><code translate="no">sum(milvus_querynode_read_task_unsolved_len{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_read_task_unsolved_len</code></td><td>未解決的讀取要求佇列的長度。</td></tr>
<tr><td>就緒讀取任務長度</td><td>每個查詢節點中待執行讀取請求佇列的長度。</td><td><code translate="no">sum(milvus_querynode_read_task_ready_len{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_read_task_ready_len</code></td><td>待執行讀取請求佇列的長度。</td></tr>
<tr><td>並行讀取任務數</td><td>每個查詢節點目前執行的並行讀取請求數目。</td><td><code translate="no">sum(milvus_querynode_read_task_concurrency{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_read_task_concurrency</code></td><td>目前執行的並行讀取請求數目。</td></tr>
<tr><td>估計 CPU 使用量</td><td>排程器估計每個查詢節點的 CPU 使用量。</td><td><code translate="no">sum(milvus_querynode_estimate_cpu_usage{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_estimate_cpu_usage</code></td><td>排程器估計每個查詢節點的 CPU 使用量。     <br/>    當值為 100 時，表示使用了整個虛擬 CPU (vCPU)。</td></tr>
<tr><td>搜尋群大小</td><td>過去兩分鐘內搜尋群大小 (即每個查詢節點執行的合併搜尋請求中原始搜尋請求的總數) 的平均數和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_size_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_search_group_size_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_size_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>來自不同資料桶的合併搜尋任務中的原始搜尋任務數目（即搜尋群組大小）。</td></tr>
<tr><td>搜尋 NQ</td><td>每個查詢節點在過去兩分鐘內執行搜尋要求時，所完成查詢次數 (NQ) 的平均值和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_size_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_search_group_size_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_size_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td>milvus_querynode_load_segment_latency_bucket</td><td>搜尋要求的查詢次數 (NQ)。</td></tr>
<tr><td>搜尋群組 NQ</td><td>每個查詢節點在過去兩分鐘內合併執行的搜尋要求 NQ 的平均數和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_nq_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_querynode_search_group_nq_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_nq_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>來自不同資料桶的合併搜尋要求 NQ。</td></tr>
<tr><td>搜尋 Top_K</td><td>每個查詢節點在過去兩分鐘內執行的<code translate="no">Top_K</code> 搜尋要求的平均數和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_topk_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_querynode_search_topk_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_topk_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>搜尋要求的<code translate="no">Top_K</code> 。</td></tr>
<tr><td>搜尋群組 Top_K</td><td>過去兩分鐘內，每個查詢節點合計執行的<code translate="no">Top_K</code> 搜尋請求的平均數和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_topk_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_querynode_search_group_topk_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_topk_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>從不同資料桶合併的搜尋要求的<code translate="no">Top_K</code> 。</td></tr>
<tr><td>驅逐讀取請求率</td><td>過去兩分鐘內，每個查詢節點每秒驅逐的讀取要求數目。</td><td><code translate="no">sum(increase(milvus_querynode_read_evicted_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_sq_req_count</code></td><td>查詢節點因流量限制而驅逐的讀取要求累計數。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>資料協調器</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 度量</th><th>Milvus 測量指標說明</th></tr>
</thead>
<tbody>
<tr><td>資料節點數</td><td>由 data coord. 管理的資料節點數目。</td><td><code translate="no">sum(milvus_datacoord_datanode_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_datanode_num</code></td><td>由資料協調員管理的資料節點數目。</td></tr>
<tr><td>段數 Num</td><td>由 data coord 記錄在 metadata 中的所有類型段落的數量。</td><td><code translate="no">sum(milvus_datacoord_segment_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (segment_state)</code></td><td><code translate="no">milvus_datacoord_segment_num</code></td><td>由資料協調員記錄在元資料中的所有類型段落的數量。    <br/>    區段類型包括：掉落、刷新、沖洗、成長和封存。</td></tr>
<tr><td>集合數</td><td>依據資料坐標在元資料中記錄的集合數量。</td><td><code translate="no">sum(milvus_datacoord_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_collection_num</code></td><td>按資料坐標在 metadata 中記錄的集合數目。</td></tr>
<tr><td>儲存的行數</td><td>資料坐標中有效和已沖洗資料的累積行數。</td><td><code translate="no">sum(milvus_datacoord_stored_rows_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_stored_rows_num</code></td><td>資料坐標中有效和已刷新資料的累積行數。</td></tr>
<tr><td>儲存行數比率</td><td>過去兩分鐘內每秒刷新的平均行數。</td><td><code translate="no">sum(increase(milvus_datacoord_stored_rows_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_datacoord_stored_rows_count</code></td><td>資料坐標刷新的累積行數。</td></tr>
<tr><td>同步時間</td><td>資料協調器在每個實體通道同步的平均、最大和最小歷時。</td><td><code translate="no">avg(milvus_datacoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) max(milvus_datacoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) min(milvus_datacoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_sync_epoch_time</code></td><td>每個實體通道的 epoch time (Unix 時間，自 1970 年 1 月 1 日起經過的毫秒數)。</td></tr>
<tr><td>儲存的 binlog 大小</td><td>儲存的 binlog 總大小。</td><td><code translate="no">sum(milvus_datacoord_stored_binlog_size{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_stored_binlog_size</code></td><td>儲存於 Milvus 的 binlog 總大小。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>資料節點</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板描述</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 公制</th><th>Milvus 測量指標說明</th></tr>
</thead>
<tbody>
<tr><td>流程圖數量</td><td>每個資料節點對應的 flowgraph 物件數量。</td><td><code translate="no">sum(milvus_datanode_flowgraph_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_flowgraph_num</code></td><td>flowgraph 物件的數量。     <br/>    集合中的每個分片對應一個 flowgraph 物件。</td></tr>
<tr><td>Msg Rows Consume Rate（訊息行消耗率</td><td>過去兩分鐘內，每個資料節點每秒消耗的串流訊息行數目。</td><td><code translate="no">sum(increase(milvus_datanode_msg_rows_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (msg_type, pod, node_id)</code></td><td><code translate="no">milvus_datanode_msg_rows_count</code></td><td>消耗的串流訊息行數。     <br/>    目前，按資料節點計算的串流訊息只包括插入和刪除訊息。</td></tr>
<tr><td>刷新資料大小率</td><td>過去兩分鐘內，每個資料節點每秒記錄的每個刷新訊息的大小。</td><td><code translate="no">sum(increase(milvus_datanode_flushed_data_size{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (msg_type, pod, node_id)</code></td><td><code translate="no">milvus_datanode_flushed_data_size</code></td><td>每個刷新訊息的大小。    <br/>    目前，按資料節點計算的串流訊息只包括插入和刪除訊息。</td></tr>
<tr><td>用戶數</td><td>在每個資料節點上建立的消費者數量。</td><td><code translate="no">sum(milvus_datanode_consumer_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_consumer_num</code></td><td>每個資料節點上建立的消費者數量。     <br/>    每個 flowgraph 對應一個 Consumer。</td></tr>
<tr><td>生產者數目</td><td>每個資料節點上建立的生產者數量。</td><td><code translate="no">sum(milvus_datanode_producer_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_producer_num</code></td><td>每個資料節點上建立的消費者數量。     <br/>    集合中的每個分片對應一個 delta 通道生產者和一個 Timetick 通道生產者。</td></tr>
<tr><td>同步時間</td><td>在所有實體主題中，每個資料節點同步的平均、最大和最小時元時間。</td><td><code translate="no">avg(milvus_datanode_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) max(milvus_datanode_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) min(milvus_datanode_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_sync_epoch_time</code></td><td>資料節點上每個實體主題的 epoch time (Unix time，自 1970 年 1 月 1 日起經過的毫秒數。)。</td></tr>
<tr><td>未刷新段數</td><td>在每個資料節點上建立的未刷新區段數目。</td><td><code translate="no">sum(milvus_datanode_unflushed_segment_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_unflushed_segment_num</code></td><td>在每個資料節點上建立的未刷新區段數目。</td></tr>
<tr><td>編碼緩衝區延遲</td><td>每個資料節點在過去兩分鐘內編碼緩衝區所用時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_datanode_encode_buffer_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_datanode_encode_buffer_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_datanode_encode_buffer_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_datanode_encode_buffer_latency</code></td><td>每個資料節點編碼緩衝區所需的時間。</td></tr>
<tr><td>儲存資料延遲</td><td>每個資料節點在過去兩分鐘內，將緩衝區寫入儲存層所用時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_datanode_save_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_datanode_save_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_datanode_save_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_datanode_save_latency</code></td><td>每個資料節點將緩衝區寫入儲存層所花費的時間。</td></tr>
<tr><td>沖洗作業率</td><td>過去兩分鐘內，每個資料節點每秒刷新緩衝區的次數。</td><td><code translate="no">sum(increase(milvus_datanode_flush_buffer_op_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_datanode_flush_buffer_op_count</code></td><td>資料節點刷新緩衝區的累積次數。</td></tr>
<tr><td>自動沖洗作業率</td><td>過去兩分鐘內，每個資料節點每秒自動刷新緩衝區的次數。</td><td><code translate="no">sum(increase(milvus_datanode_autoflush_buffer_op_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_datanode_autoflush_buffer_op_count</code></td><td>資料節點自動刷新緩衝區的累積次數。</td></tr>
<tr><td>沖洗要求率</td><td>過去兩分鐘內，每個資料節點每秒收到緩衝區刷新請求的次數。</td><td><code translate="no">sum(increase(milvus_datanode_flush_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_datanode_flush_req_count</code></td><td>資料節點從資料協調器收到沖洗要求的累積次數。</td></tr>
<tr><td>壓縮延遲</td><td>過去兩分鐘內，每個資料節點執行壓縮任務所花時間的平均延遲時間和 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_datanode_compaction_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_datanode_compaction_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_datanode_compaction_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_datanode_compaction_latency</code></td><td>每個資料節點執行壓縮任務所需的時間。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>索引協調器</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 度量</th><th>Milvus 度量說明</th></tr>
</thead>
<tbody>
<tr><td>索引請求率</td><td>過去兩分鐘內平均每秒收到的索引建立請求數目。</td><td><code translate="no">sum(increase(milvus_indexcoord_indexreq_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status)</code></td><td><code translate="no">milvus_indexcoord_indexreq_count</code></td><td>收到的索引建立請求數目。</td></tr>
<tr><td>索引任務計數</td><td>索引元資料中記錄的所有索引建立任務的計數。</td><td><code translate="no">sum(milvus_indexcoord_indextask_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (index_task_status)</code></td><td><code translate="no">milvus_indexcoord_indextask_count</code></td><td>索引元資料中記錄的所有索引任務計數。</td></tr>
<tr><td>索引節點數目</td><td>受管索引節點的數量。</td><td><code translate="no">sum(milvus_indexcoord_indexnode_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_indexcoord_indexnode_num</code></td><td>受管索引節點的數目。</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>索引節點</summary></p>
<table>
<thead>
<tr><th>面板</th><th>面板說明</th><th>PromQL (Prometheus 查詢語言)</th><th>使用的 Milvus 度量</th><th>Milvus 測量指標說明</th></tr>
</thead>
<tbody>
<tr><td>索引任務率</td><td>過去兩分鐘內，每個索引節點平均每秒收到的索引建立任務數量。</td><td><code translate="no">sum(increase(milvus_indexnode_index_task_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_indexnode_index_task_count</code></td><td>收到的索引建立任務數。</td></tr>
<tr><td>負載欄位延遲</td><td>過去兩分鐘內，每個索引節點每次載入段字段資料所用時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_load_field_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_indexnode_load_field_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_load_field_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_load_field_latency</code></td><td>索引節點載入段字段資料所用的時間。</td></tr>
<tr><td>解碼欄位延遲</td><td>每個索引節點在過去兩分鐘內每次編碼欄位資料所用時間的平均延遲時間和第 99 百分位數。</td><td>P99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_decode_field_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> AVG:<br/> <code translate="no">sum(increase(milvus_indexnode_decode_field_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_decode_field_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_decode_field_latency</code></td><td>用於解碼欄位資料的時間。</td></tr>
<tr><td>建立索引延遲</td><td>每個索引節點在過去兩分鐘內建立索引所用時間的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_build_index_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_indexnode_build_index_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_build_index_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_build_index_latency</code></td><td>建立索引所用的時間。</td></tr>
<tr><td>編碼索引延遲</td><td>每個索引節點在過去兩分鐘內編碼索引檔案所用時間的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_encode_index_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_indexnode_encode_index_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_encode_index_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_encode_index_latency</code></td><td>編碼索引檔案所用的時間。</td></tr>
<tr><td>儲存索引延遲</td><td>每個索引節點在過去兩分鐘內儲存索引檔案所用時間的平均延遲時間和第 99 百分位數。</td><td>p99:<br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_save_index_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg:<br/> <code translate="no">sum(increase(milvus_indexnode_save_index_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_save_index_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_save_index_latency</code></td><td>儲存索引檔案所用的時間。</td></tr>
</tbody>
</table>
<p></details></p>
