{"codeList":["normalized_score = 1.0 - (2 × arctan(score))/π\n","final_score = normalized_similarity_score × decay_score\n","final_score = max([normalized_score₁, normalized_score₂, ..., normalized_scoreₙ]) × decay_score\n","from pymilvus import Function, FunctionType\n\n# Create a decay function for timestamp-based decay\n# Note: All time parameters must use the same unit as your collection data\ndecay_ranker = Function(\n    name=\"time_decay\",                  # Function identifier\n    input_field_names=[\"timestamp\"],    # Numeric field to use for decay\n    function_type=FunctionType.RERANK,  # Must be set to RERANK for decay rankers\n    params={\n        \"reranker\": \"decay\",            # Specify decay reranker. Must be \"decay\"\n        \"function\": \"gauss\",            # Choose decay function type: \"gauss\", \"exp\", or \"linear\"\n        \"origin\": int(datetime.datetime(2025, 1, 15).timestamp()),    # Reference point (seconds)\n        \"scale\": 7 * 24 * 60 * 60,      # 7 days in seconds (must match collection data unit)\n        \"offset\": 24 * 60 * 60,         # 1 day no-decay zone (must match collection data unit)\n        \"decay\": 0.5                    # Half score at scale distance\n    }\n)\n","import io.milvus.v2.service.vector.request.ranker.DecayRanker;\n\nimport java.time.ZoneId;\nimport java.time.ZonedDateTime;\n\nZonedDateTime zdt = ZonedDateTime.of(2025, 1, 25, 0, 0, 0, 0, ZoneId.systemDefault());\n\nDecayRanker ranker = DecayRanker.builder()\n        .name(\"time_decay\")\n        .inputFieldNames(Collections.singletonList(\"timestamp\"))\n        .function(\"gauss\")\n        .origin(zdt.toInstant().toEpochMilli())\n        .scale(7 * 24 * 60 * 60)\n        .offset(24 * 60 * 60)\n        .decay(0.5)\n        .build();\n\n","\nimport {FunctionType } from \"@zilliz/milvus2-sdk-node\";\n\nconst decayRanker = {\n  name: \"time_decay\",\n  input_field_names: [\"timestamp\"],\n  function_type: FunctionType.RERANK,\n  params: {\n    reranker: \"decay\",\n    function: \"gauss\",\n    origin: new Date(2025, 1, 15).getTime(),\n    scale: 7 * 24 * 60 * 60,\n    offset: 24 * 60 * 60,\n    decay: 0.5,\n  },\n};\n\n","// go\n","# restful\n","# Use the decay function in standard vector search\nresults = milvus_client.search(\n    collection_name,\n    data=[your_query_vector], # Replace with your query vector\n    anns_field=\"vector_field\",\n    limit=10,\n    output_fields=[\"document\", \"timestamp\"],  # Include the decay field in outputs to see values\n    #  highlight-next-line\n    ranker=decay_ranker,                      # Apply the decay ranker here\n    consistency_level=\"Strong\"\n)\n","import io.milvus.v2.service.vector.request.SearchReq;\nimport io.milvus.v2.service.vector.response.SearchResp;\nimport io.milvus.v2.service.vector.request.data.EmbeddedText;\n\nSearchReq searchReq = SearchReq.builder()\n        .collectionName(COLLECTION_NAME)\n        .data(Collections.singletonList(new EmbeddedText(\"search query\")))\n        .annsField(\"vector_field\")\n        .limit(10)\n        .outputFields(Arrays.asList(\"document\", \"timestamp\"))\n        .functionScore(FunctionScore.builder()\n                .addFunction(ranker)\n                .build())\n        .build();\nSearchResp searchResp = client.search(searchReq);\n","const result = await milvusClient.search({\n  collection_name: \"collection_name\",\n  data: [your_query_vector], // Replace with your query vector\n  anns_field: \"dense\",\n  limit: 10,\n  output_fields: [\"document\", \"timestamp\"],\n  rerank: ranker,\n  consistency_level: \"Strong\",\n});\n","// go\n","# restful\n","from pymilvus import AnnSearchRequest\n\n# Define search requests for different vector fields\ndense_request = AnnSearchRequest(\n    data=[your_query_vector_1], # Replace with your query vector\n    anns_field=\"dense_vector\",\n    param={},\n    limit=20\n)\n\nsparse_request = AnnSearchRequest(\n    data=[your_query_vector_2], # Replace with your query vector\n    anns_field=\"sparse_vector\",\n    param={},\n    limit=20\n)\n\n# Apply decay ranker to hybrid search\nhybrid_results = milvus_client.hybrid_search(\n    collection_name,\n    [dense_request, sparse_request],\n    #  highlight-next-line\n    ranker=decay_ranker,                      # Same decay ranker works with hybrid search\n    limit=10,\n    output_fields=[\"document\", \"timestamp\"]\n)\n","import io.milvus.v2.service.vector.request.AnnSearchReq;\nimport io.milvus.v2.service.vector.request.HybridSearchReq;\nimport io.milvus.v2.service.vector.request.data.EmbeddedText;\nimport io.milvus.v2.service.vector.request.data.FloatVec;\n        \nList<AnnSearchReq> searchRequests = new ArrayList<>();\nsearchRequests.add(AnnSearchReq.builder()\n        .vectorFieldName(\"dense_vector\")\n        .vectors(Collections.singletonList(new FloatVec(embedding)))\n        .limit(20)\n        .build());\nsearchRequests.add(AnnSearchReq.builder()\n        .vectorFieldName(\"sparse_vector\")\n        .vectors(Collections.singletonList(new EmbeddedText(\"search query\")))\n        .limit(20)\n        .build());\n\nHybridSearchReq hybridSearchReq = HybridSearchReq.builder()\n                .collectionName(COLLECTION_NAME)\n                .searchRequests(searchRequests)\n                .ranker(ranker)\n                .limit(10)\n                .outputFields(Arrays.asList(\"document\", \"timestamp\"))\n                .build();\nSearchResp searchResp = client.hybridSearch(hybridSearchReq);\n","const denseRequest = {\n  data: [your_query_vector_1], // Replace with your query vector\n  anns_field: \"dense_vector\",\n  param: {},\n  limit: 20,\n};\n\nconst sparseRequest = {\n  data: [your_query_vector_2], // Replace with your query vector\n  anns_field: \"sparse_vector\",\n  param: {},\n  limit: 20,\n};\n\nconst hybridResults = await milvusClient.hybrid_search({\n  collection_name: \"collection_name\",\n  data: [denseRequest, sparseRequest],\n  ranker: decayRanker,\n  limit: 10,\n  output_fields: [\"document\", \"timestamp\"],\n});\n\n","// go\n","# restful\n"],"headingContent":"Decay Ranker Overview","anchorList":[{"label":"Visión general de Decay RankerCompatible with Milvus 2.6.x","href":"Decay-Ranker-Overview","type":1,"isActive":false},{"label":"Notas de uso","href":"Usage-notes","type":2,"isActive":false},{"label":"Funcionamiento","href":"How-it-works","type":2,"isActive":false},{"label":"Etapa 1: Calcular las puntuaciones de similitud normalizadas","href":"Stage-1-Calculate-normalized-similarity-scores","type":3,"isActive":false},{"label":"Etapa 2: Calcular las puntuaciones de decaimiento","href":"Stage-2-Calculate-decay-scores","type":3,"isActive":false},{"label":"Etapa 3: Calcular las puntuaciones finales","href":"Stage-3-Compute-final-scores","type":3,"isActive":false},{"label":"Decay ranking en acción","href":"Decay-ranking-in-action","type":3,"isActive":false},{"label":"Elija el clasificador correcto","href":"Choose-the-right-decay-ranker","type":2,"isActive":false},{"label":"Ejemplo de aplicación","href":"Implementation-example","type":2,"isActive":false},{"label":"Crear un clasificador de decaimiento","href":"Create-a-decay-ranker","type":3,"isActive":false},{"label":"Aplicar a la búsqueda vectorial estándar","href":"Apply-to-standard-vector-search","type":3,"isActive":false},{"label":"Aplicar a la búsqueda híbrida","href":"Apply-to-hybrid-search","type":3,"isActive":false}]}