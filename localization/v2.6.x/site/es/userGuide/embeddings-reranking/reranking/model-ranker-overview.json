{"codeList":["from pymilvus import MilvusClient, Function, FunctionType\n\n# Connect to your Milvus server\nclient = MilvusClient(\n    uri=\"http://localhost:19530\"  # Replace with your Milvus server URI\n)\n\n# Create a model ranker function\nmodel_ranker = Function(\n    name=\"semantic_ranker\",  # Function identifier\n    input_field_names=[\"document\"],  # VARCHAR field to use for reranking\n    function_type=FunctionType.RERANK,  # Must be set to RERANK\n    params={\n        \"reranker\": \"model\",  # Specify model reranker. Must be \"model\"\n        \"provider\": \"tei\",  # Choose provider: \"tei\", \"vllm\", etc.\n        \"queries\": [\"machine learning for time series\"],  # Query text\n        \"endpoint\": \"http://model-service:8080\",  # Model service endpoint\n        # \"maxBatch\": 32  # Optional: batch size for processing\n    }\n)\n","import io.milvus.v2.client.ConnectConfig;\nimport io.milvus.v2.client.MilvusClientV2;\nimport io.milvus.v2.service.vector.request.ranker.ModelRanker;\n\nMilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()\n        .uri(\"http://localhost:19530\")\n        .build());\n\nModelRanker ranker = ModelRanker.builder()\n        .name(\"semantic_ranker\")\n        .inputFieldNames(Collections.singletonList(\"document\"))\n        .provider(\"tei\")\n        .queries(Collections.singletonList(\"machine learning for time series\"))\n        .endpoint(\"http://model-service:8080\")\n        .build();\n","// nodejs\n","// go\n","# restful\n","# Use the model ranker in standard vector search\nresults = client.search(\n    collection_name,\n    data=[your_query_vector], # Number of query vectors must match that specified in model_ranker.params[\"queries\"] \n    anns_field=\"vector_field\",\n    limit=10,\n    output_fields=[\"document\"],  # Include the text field in outputs\n    #  highlight-next-line\n    ranker=model_ranker,  # Apply the model ranker here\n    consistency_level=\"Bounded\"\n)\n","import io.milvus.v2.common.ConsistencyLevel;\nimport io.milvus.v2.service.vector.request.SearchReq;\nimport io.milvus.v2.service.vector.response.SearchResp;\nimport io.milvus.v2.service.vector.request.data.EmbeddedText;\n\nSearchReq searchReq = SearchReq.builder()\n        .collectionName(COLLECTION_NAME)\n        .data(Collections.singletonList(new EmbeddedText(\"machine learning for time series\")))\n        .annsField(\"vector_field\")\n        .limit(10)\n        .outputFields(Collections.singletonList(document))\n        .functionScore(FunctionScore.builder()\n                .addFunction(ranker)\n                .build())\n        .consistencyLevel(ConsistencyLevel.BOUNDED)\n        .build();\nSearchResp searchResp = client.search(searchReq);\n","// nodejs\n","// go\n","# restful\n","from pymilvus import AnnSearchRequest\n\n# Define search requests for different vector fields\ndense_request = AnnSearchRequest(\n    data=[your_query_vector_1], # Replace with your query vector\n    anns_field=\"dense_vector\",\n    param={},\n    limit=20\n)\n\nsparse_request = AnnSearchRequest(\n    data=[your_query_vector_2], # Replace with your query vector\n    anns_field=\"sparse_vector\",\n    param={},\n    limit=20\n)\n\n# Apply model ranker to hybrid search\nhybrid_results = client.hybrid_search(\n    collection_name,\n    [dense_request, sparse_request],\n    #  highlight-next-line\n    ranker=model_ranker,  # Same model ranker works with hybrid search\n    limit=10,\n    output_fields=[\"document\"]\n)\n","import io.milvus.v2.service.vector.request.AnnSearchReq;\nimport io.milvus.v2.service.vector.request.HybridSearchReq;\nimport io.milvus.v2.service.vector.request.data.EmbeddedText;\nimport io.milvus.v2.service.vector.request.data.FloatVec;\n        \nList<AnnSearchReq> searchRequests = new ArrayList<>();\nsearchRequests.add(AnnSearchReq.builder()\n        .vectorFieldName(\"dense_vector\")\n        .vectors(Collections.singletonList(new FloatVec(embedding)))\n        .limit(10)\n        .build());\nsearchRequests.add(AnnSearchReq.builder()\n        .vectorFieldName(\"sparse_vector\")\n        .vectors(Collections.singletonList(new EmbeddedText(\"machine learning for time series\")))\n        .limit(10)\n        .build());\n\nHybridSearchReq hybridSearchReq = HybridSearchReq.builder()\n                .collectionName(COLLECTION_NAME)\n                .searchRequests(searchRequests)\n                .ranker(ranker)\n                .limit(10)\n                .outputFields(Arrays.asList(\"title\", \"venue\", \"event_date\"))\n                .build();\nSearchResp searchResp = client.hybridSearch(hybridSearchReq);\n","// nodejs\n","// go\n","# restful\n"],"headingContent":"Model Ranker Overview","anchorList":[{"label":"Visión general del clasificador de modelosCompatible with Milvus 2.6.x","href":"Model-Ranker-Overview","type":1,"isActive":false},{"label":"Límites","href":"Limits","type":2,"isActive":false},{"label":"Funcionamiento","href":"How-it-works","type":2,"isActive":false},{"label":"Elija un proveedor de modelos que se adapte a sus necesidades","href":"Choose-a-model-provider-for-your-needs","type":2,"isActive":false},{"label":"Implementación","href":"Implementation","type":2,"isActive":false},{"label":"Creación de un clasificador de modelos","href":"Create-a-model-ranker","type":3,"isActive":false},{"label":"Aplicar a la búsqueda vectorial estándar","href":"Apply-to-standard-vector-search","type":3,"isActive":false},{"label":"Aplicar a la búsqueda híbrida","href":"Apply-to-hybrid-search","type":3,"isActive":false}]}