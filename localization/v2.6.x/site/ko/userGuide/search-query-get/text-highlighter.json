{"codeList":["Milvus supports full text search. Use BM25 for keyword relevance. Filters can narrow results.\n","from pymilvus import LexicalHighlighter\n\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],              # Tag inserted before each highlighted term\n    post_tags=[\"}\"],             # Tag inserted after each highlighted term\n    highlight_search_text=True   # Enable search term highlighting for BM25 full text search\n)\n","results = client.search(\n    ...,\n    data=[\"BM25\"],      # Search term used in BM25 full text search\n    # highlight-next-line\n    highlighter=highlighter # Pass highlighter config here\n)\n","{\n    ...,\n    \"highlight\": {\n        \"text\": [\n            \"{BM25} for keyword relevance. Filters can narrow results.\"\n        ]\n    }\n}\n","This document explains how text filtering works in Milvus.\n","from pymilvus import LexicalHighlighter\n\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],              # Tag inserted before each highlighted term\n    post_tags=[\"}\"],             # Tag inserted after each highlighted term\n    highlight_query=[{\n        \"type\": \"TextMatch\",     # Text filtering type\n        \"field\": \"text\",         # Target text field\n        \"text\": \"text filtering\" # Terms to highlight\n    }]\n)\n","results = client.search(\n    ...,\n    filter='TEXT_MATCH(text, \"text filtering\")',\n    # highlight-next-line\n    highlighter=highlighter # Pass highlighter config here\n)\n","{\n    ...,\n    \"highlight\": {\n        \"text\": [\n            \"{text} {filtering} works in Milvus.\"\n        ]\n    }\n}\n","Milvus supports full text search. Use BM25 for keyword relevance. Filters can narrow results.\n","from pymilvus import LexicalHighlighter\n\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],\n    post_tags=[\"}\"],\n    highlight_search_text=True,\n    fragment_offset=5,     # Number of characters to reserve before the first matched term\n    fragment_size=60,      # Max. length of each fragment to return\n    num_of_fragments=1     # Max. number of fragments to return\n)\n","results = client.search(\n    ...,\n    data=[\"BM25\"],\n    # highlight-next-line\n    highlighter=highlighter # Pass highlighter config here\n)\n","{\n    ...,\n    \"highlight\": {\n        \"text\": [\n            \"Use {BM25} for keyword relevance. Filters can narrow results.\"\n        ]\n    }\n}\n","from pymilvus import (\n    MilvusClient,\n    DataType,\n    Function,\n    FunctionType,\n    LexicalHighlighter,\n)\n\nclient = MilvusClient(uri=\"http://localhost:19530\")\nCOLLECTION_NAME = \"highlighter_demo\"\n\n# Clean up existing collection\nif client.has_collection(COLLECTION_NAME):\n    client.drop_collection(COLLECTION_NAME)\n\n# Define schema\nschema = client.create_schema(enable_dynamic_field=False)\nschema.add_field(field_name=\"id\", datatype=DataType.INT64, is_primary=True, auto_id=True)\nschema.add_field(\n    field_name=\"text\",\n    datatype=DataType.VARCHAR,\n    max_length=2000,\n    enable_analyzer=True,  # Required for BM25\n    enable_match=True,     # Required for TEXT_MATCH\n)\nschema.add_field(field_name=\"sparse_vector\", datatype=DataType.SPARSE_FLOAT_VECTOR)\n\n# Add BM25 function\nschema.add_function(Function(\n    name=\"text_bm25\",\n    function_type=FunctionType.BM25,\n    input_field_names=[\"text\"],\n    output_field_names=[\"sparse_vector\"],\n))\n\n# Create index\nindex_params = client.prepare_index_params()\nindex_params.add_index(\n    field_name=\"sparse_vector\",\n    index_type=\"SPARSE_INVERTED_INDEX\",\n    metric_type=\"BM25\",\n    params={\"inverted_index_algo\": \"DAAT_MAXSCORE\", \"bm25_k1\": 1.2, \"bm25_b\": 0.75},\n)\n\nclient.create_collection(collection_name=COLLECTION_NAME, schema=schema, index_params=index_params)\n\n# Insert sample documents\ndocs = [\n    \"my first test doc\",\n    \"my second test doc\",\n    \"my first test doc. Milvus is an open-source vector database built for GenAI applications.\",\n    \"my second test doc. Milvus is an open-source vector database that suits AI applications \"\n    \"of every size from running a demo chatbot to building web-scale search.\",\n]\nclient.insert(collection_name=COLLECTION_NAME, data=[{\"text\": t} for t in docs])\nprint(f\"✓ Collection created with {len(docs)} documents\\n\")\n\n# Helper for search params\nSEARCH_PARAMS = {\"metric_type\": \"BM25\", \"params\": {\"drop_ratio_search\": 0.0}}\n\n# Expected output:\n# ✓ Collection created with 4 documents\n","# highlight-start\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],\n    post_tags=[\"}\"],\n    highlight_search_text=True,  # Highlight BM25 query terms\n)\n# highlight-end\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[\"test\"],\n    anns_field=\"sparse_vector\",\n    limit=10,\n    search_params=SEARCH_PARAMS,\n    output_fields=[\"text\"],\n    # highlight-next-line\n    highlighter=highlighter,\n)\n\nfor hit in results[0]:\n    print(f\"  {hit.get('highlight', {}).get('text', [])}\")\nprint()\n","['{test} doc']\n['{test} doc']\n['{test} doc. Milvus is an open-source vector database built for GenAI applications.']\n['{test} doc. Milvus is an open-source vector database that suits AI applications of every size from run']\n","# highlight-start\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],\n    post_tags=[\"}\"],\n    highlight_search_text=True,   # Also highlight BM25 term\n    highlight_query=[                     # Additional TEXT_MATCH terms to highlight\n        {\"type\": \"TextMatch\", \"field\": \"text\", \"text\": \"my doc\"},\n    ],\n)\n# highlight-end\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[\"test\"],\n    anns_field=\"sparse_vector\",\n    limit=10,\n    search_params=SEARCH_PARAMS,\n    output_fields=[\"text\"],\n    # highlight-next-line\n    highlighter=highlighter,\n)\n\nfor hit in results[0]:\n    print(f\"  {hit.get('highlight', {}).get('text', [])}\")\nprint()\n","['{my} first {test} {doc}']\n['{my} second {test} {doc}']\n['{my} first {test} {doc}. Milvus is an open-source vector database built for GenAI applications.']\n['{my} second {test} {doc}. Milvus is an open-source vector database that suits AI applications of every siz']\n","# highlight-start\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],\n    post_tags=[\"}\"],\n    highlight_search_text=True,\n    fragment_offset=20,  # Keep 20 chars before match\n    fragment_size=60,    # Max ~60 chars per fragment\n)\n# highlight-end\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[\"Milvus\"],\n    anns_field=\"sparse_vector\",\n    limit=10,\n    search_params=SEARCH_PARAMS,\n    output_fields=[\"text\"],\n    # highlight-next-line\n    highlighter=highlighter,\n)\n\nfor i, hit in enumerate(results[0]):\n    frags = hit.get('highlight', {}).get('text', [])\n    print(f\"  Doc {i+1}: {frags}\")\nprint()\n","Doc 1: ['my first test doc. {Milvus} is an open-source vector database ']\nDoc 2: ['my second test doc. {Milvus} is an open-source vector database']\n","# highlight-start\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"{\"],\n    post_tags=[\"}\"],\n    highlight_search_text=True,\n)\n# highlight-end\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[\"test\", \"Milvus\"],  # Two queries\n    anns_field=\"sparse_vector\",\n    limit=2,\n    search_params=SEARCH_PARAMS,\n    output_fields=[\"text\"],\n    # highlight-next-line\n    highlighter=highlighter,\n)\n\nfor nq_idx, hits in enumerate(results):\n    query_term = [\"test\", \"Milvus\"][nq_idx]\n    print(f\"  Query '{query_term}':\")\n    for hit in hits:\n        print(f\"    {hit.get('highlight', {}).get('text', [])}\")\nprint()\n","Query 'test':\n  ['{test} doc']\n  ['{test} doc']\nQuery 'Milvus':\n  ['{Milvus} is an open-source vector database built for GenAI applications.']\n  ['{Milvus} is an open-source vector database that suits AI applications of every size from running a dem']\n","# highlight-start\nhighlighter = LexicalHighlighter(\n    pre_tags=[\"<mark>\"],\n    post_tags=[\"</mark>\"],\n    highlight_search_text=True,\n)\n# highlight-end\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[\"test\"],\n    anns_field=\"sparse_vector\",\n    limit=2,\n    search_params=SEARCH_PARAMS,\n    output_fields=[\"text\"],\n    # highlight-next-line\n    highlighter=highlighter,\n)\n\nfor hit in results[0]:\n    print(f\"  {hit.get('highlight', {}).get('text', [])}\")\nprint()\n","['<mark>test</mark> doc']\n['<mark>test</mark> doc']\n"],"headingContent":"Text Highlighter","anchorList":[{"label":"텍스트 하이라이터Compatible with Milvus 2.6.8+","href":"Text-Highlighter","type":1,"isActive":false},{"label":"BM25 전체 텍스트 검색에서 검색어 강조 표시하기","href":"Search-term-highlighting-in-BM25-full-text-search","type":2,"isActive":false},{"label":"필터링에서 검색어 강조 표시","href":"Query-term-highlighting-in-filtering","type":2,"isActive":false},{"label":"프래그먼트 기반 강조 표시 출력","href":"Fragment-based-highlighting-output","type":2,"isActive":false},{"label":"예제","href":"Examples","type":2,"isActive":false},{"label":"준비","href":"Preparation","type":3,"isActive":false},{"label":"예 1: BM25 전체 텍스트 검색에서 검색어 강조 표시하기","href":"Example-1-Highlight-search-terms-in-BM25-full-text-search","type":3,"isActive":false},{"label":"예 2: 필터링에서 쿼리 용어 강조 표시하기","href":"Example-2-Highlight-query-terms-in-filtering","type":3,"isActive":false},{"label":"예 3: 하이라이트를 조각으로 반환","href":"Example-3-Return-highlights-as-fragments","type":3,"isActive":false},{"label":"예 4: 다중 쿼리 강조 표시","href":"Example-4-Multi-query-highlighting","type":3,"isActive":false},{"label":"예 5: 사용자 정의 HTML 태그","href":"Example-5-Custom-HTML-tags","type":3,"isActive":false}]}