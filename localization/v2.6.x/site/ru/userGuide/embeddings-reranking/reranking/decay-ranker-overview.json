{"codeList":["normalized_score = 1.0 - (2 × arctan(score))/π\n","final_score = normalized_similarity_score × decay_score\n","final_score = max([normalized_score₁, normalized_score₂, ..., normalized_scoreₙ]) × decay_score\n","from pymilvus import Function, FunctionType\n\n# Create a decay function for timestamp-based decay\n# Note: All time parameters must use the same unit as your collection data\ndecay_ranker = Function(\n    name=\"time_decay\",                  # Function identifier\n    input_field_names=[\"timestamp\"],    # Numeric field to use for decay\n    function_type=FunctionType.RERANK,  # Must be set to RERANK for decay rankers\n    params={\n        \"reranker\": \"decay\",            # Specify decay reranker. Must be \"decay\"\n        \"function\": \"gauss\",            # Choose decay function type: \"gauss\", \"exp\", or \"linear\"\n        \"origin\": int(datetime.datetime(2025, 1, 15).timestamp()),    # Reference point (seconds)\n        \"scale\": 7 * 24 * 60 * 60,      # 7 days in seconds (must match collection data unit)\n        \"offset\": 24 * 60 * 60,         # 1 day no-decay zone (must match collection data unit)\n        \"decay\": 0.5                    # Half score at scale distance\n    }\n)\n","# Use the decay function in standard vector search\nresults = milvus_client.search(\n    collection_name,\n    data=[\"search query\"],\n    anns_field=\"vector_field\",\n    limit=10,\n    output_fields=[\"document\", \"timestamp\"],  # Include the decay field in outputs to see values\n    #  highlight-next-line\n    ranker=decay_ranker,                      # Apply the decay ranker here\n    consistency_level=\"Bounded\"\n)\n","from pymilvus import AnnSearchRequest\n\n# Define search requests for different vector fields\ndense_request = AnnSearchRequest(\n    data=[\"search query\"],\n    anns_field=\"dense_vector\",\n    param={},\n    limit=20\n)\n\nsparse_request = AnnSearchRequest(\n    data=[\"search query\"],\n    anns_field=\"sparse_vector\",\n    param={},\n    limit=20\n)\n\n# Apply decay ranker to hybrid search\nhybrid_results = milvus_client.hybrid_search(\n    collection_name,\n    [dense_request, sparse_request],\n    #  highlight-next-line\n    ranker=decay_ranker,                      # Same decay ranker works with hybrid search\n    limit=10,\n    output_fields=[\"document\", \"timestamp\"]\n)\n"],"headingContent":"Decay Ranker Overview","anchorList":[{"label":"Обзор Decay RankerCompatible with Milvus 2.6.x","href":"Decay-Ranker-Overview","type":1,"isActive":false},{"label":"Примечания по использованию","href":"Usage-notes","type":2,"isActive":false},{"label":"Как это работает","href":"How-it-works","type":2,"isActive":false},{"label":"Этап 1: Вычисление нормализованных баллов сходства","href":"Stage-1-Calculate-normalized-similarity-scores","type":3,"isActive":false},{"label":"Этап 2: Расчет оценок распада","href":"Stage-2-Calculate-decay-scores","type":3,"isActive":false},{"label":"Этап 3: Вычисление итоговых оценок","href":"Stage-3-Compute-final-scores","type":3,"isActive":false},{"label":"Ранжирование по распаду в действии","href":"Decay-ranking-in-action","type":3,"isActive":false},{"label":"Выберите правильный ранжировщик распада","href":"Choose-the-right-decay-ranker","type":2,"isActive":false},{"label":"Пример реализации","href":"Implementation-example","type":2,"isActive":false},{"label":"Создание ранжировщика распада","href":"Create-a-decay-ranker","type":3,"isActive":false},{"label":"Применить к стандартному векторному поиску","href":"Apply-to-standard-vector-search","type":3,"isActive":false},{"label":"Применить к гибридному поиску","href":"Apply-to-hybrid-search","type":3,"isActive":false}]}