{"codeList":["from pymilvus import MilvusClient, Function, FunctionType\n\n# Connect to your Milvus server\nclient = MilvusClient(\n    uri=\"http://localhost:19530\"  # Replace with your Milvus server URI\n)\n\n# Configure SiliconFlow Ranker\nsiliconflow_ranker = Function(\n    name=\"siliconflow_semantic_ranker\",     # Unique identifier for your ranker\n    input_field_names=[\"document\"],         # VARCHAR field containing text to rerank\n    function_type=FunctionType.RERANK,      # Must be RERANK for reranking functions\n    params={\n        \"reranker\": \"model\",                # Enables model-based reranking\n        \"provider\": \"siliconflow\",          # Specifies SiliconFlow as the service provider\n        \"model_name\": \"BAAI/bge-reranker-v2-m3\", # SiliconFlow reranking model to use\n        \"queries\": [\"renewable energy developments\"], # Query text for relevance evaluation\n        \"max_client_batch_size\": 128,       # Optional: batch size for model service requests (default: 128)\n        \"max_chunks_per_doc\": 5,            # Optional: max chunks per document for supported models\n        \"overlap_tokens\": 50,               # Optional: token overlap between chunks for supported models\n        # \"credential\": \"your-siliconflow-api-key\" # Optional: if not set, uses SILICONFLOW_API_KEY env var\n    }\n)\n","import io.milvus.v2.client.ConnectConfig;\nimport io.milvus.v2.client.MilvusClientV2;\nimport io.milvus.common.clientenum.FunctionType;\nimport io.milvus.v2.service.collection.request.CreateCollectionReq;\n\nMilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()\n        .uri(\"http://localhost:19530\")\n        .build());\n\nCreateCollectionReq.Function ranker = CreateCollectionReq.Function.builder()\n                       .functionType(FunctionType.RERANK)\n                       .name(\"siliconflow_semantic_ranker\")\n                       .inputFieldNames(Collections.singletonList(\"document\"))\n                       .param(\"reranker\", \"model\")\n                       .param(\"provider\", \"siliconflow\")\n                       .param(\"model_name\", \"BAAI/bge-reranker-v2-m3\")\n                       .param(\"queries\", \"[\\\"renewable energy developments\\\"]\")\n                       .param(\"endpoint\", \"http://localhost:8080\")\n                       .param(\"max_client_batch_size\", \"32\")\n                       .param(\"max_chunks_per_doc\", \"5\")\n                       .param(\"overlap_tokens\", \"50\")\n                       .build();\n","// nodejs\n","// go\n","# restful\n","# Execute search with SiliconFlow reranking\nresults = client.search(\n    collection_name=\"your_collection\",\n    data=[your_query_vector],  # Replace with your query vector\n    anns_field=\"dense_vector\",                   # Vector field to search\n    limit=5,                                     # Number of results to return\n    output_fields=[\"document\"],                  # Include text field for reranking\n    #  highlight-next-line\n    ranker=siliconflow_ranker,                  # Apply SiliconFlow reranking\n    consistency_level=\"Bounded\"\n)\n","import io.milvus.v2.common.ConsistencyLevel;\nimport io.milvus.v2.service.vector.request.SearchReq;\nimport io.milvus.v2.service.vector.response.SearchResp;\nimport io.milvus.v2.service.vector.request.data.EmbeddedText;\n\nSearchReq searchReq = SearchReq.builder()\n        .collectionName(\"your_collection\")\n        .data(Arrays.asList(new EmbeddedText(\"AI Research Progress\"), new EmbeddedText(\"What is AI\")))\n        .annsField(\"vector_field\")\n        .limit(10)\n        .outputFields(Collections.singletonList(\"document\"))\n        .functionScore(FunctionScore.builder()\n                .addFunction(ranker)\n                .build())\n        .consistencyLevel(ConsistencyLevel.BOUNDED)\n        .build();\nSearchResp searchResp = client.search(searchReq);\n","// nodejs\n","// go\n","# restful\n","from pymilvus import AnnSearchRequest\n\n# Configure dense vector search\ndense_search = AnnSearchRequest(\n    data=[your_query_vector_1], # Replace with your query vector\n    anns_field=\"dense_vector\",\n    param={},\n    limit=5\n)\n\n# Configure sparse vector search  \nsparse_search = AnnSearchRequest(\n    data=[your_query_vector_2], # Replace with your query vector\n    anns_field=\"sparse_vector\", \n    param={},\n    limit=5\n)\n\n# Execute hybrid search with SiliconFlow reranking\nhybrid_results = client.hybrid_search(\n    collection_name=\"your_collection\",\n    [dense_search, sparse_search],              # Multiple search requests\n    #  highlight-next-line\n    ranker=siliconflow_ranker,                 # Apply SiliconFlow reranking to combined results\n    limit=5,                                   # Final number of results\n    output_fields=[\"document\"]\n)\n","import io.milvus.v2.service.vector.request.AnnSearchReq;\nimport io.milvus.v2.service.vector.request.HybridSearchReq;\nimport io.milvus.v2.service.vector.request.data.EmbeddedText;\nimport io.milvus.v2.service.vector.request.data.FloatVec;\n        \nList<AnnSearchReq> searchRequests = new ArrayList<>();\nsearchRequests.add(AnnSearchReq.builder()\n        .vectorFieldName(\"dense_vector\")\n        .vectors(Arrays.asList(new FloatVec(embedding1), new FloatVec(embedding2)))\n        .limit(5)\n        .build());\nsearchRequests.add(AnnSearchReq.builder()\n        .vectorFieldName(\"sparse_vector\")\n        .data(Arrays.asList(new EmbeddedText(\"AI Research Progress\"), new EmbeddedText(\"What is AI\")))\n        .limit(5)\n        .build());\n\nHybridSearchReq hybridSearchReq = HybridSearchReq.builder()\n                .collectionName(\"your_collection\")\n                .searchRequests(searchRequests)\n                .ranker(ranker)\n                .limit(5)\n                .outputFields(Collections.singletonList(\"document\"))\n                .build();\nSearchResp searchResp = client.hybridSearch(hybridSearchReq);\n","// nodejs\n","// go\n","# restful\n"],"headingContent":"SiliconFlow Ranker","anchorList":[{"label":"Ранжировщик SiliconFlowCompatible with Milvus 2.6.x","href":"SiliconFlow-Ranker","type":1,"isActive":false},{"label":"Предварительные условия","href":"Prerequisites","type":2,"isActive":false},{"label":"Создание функции ранжирования SiliconFlow","href":"Create-a-SiliconFlow-ranker-function","type":2,"isActive":false},{"label":"Специфические параметры ранжировщика SiliconFlow","href":"SiliconFlow-ranker-specific-parameters","type":3,"isActive":false},{"label":"Применение к стандартному векторному поиску","href":"Apply-to-standard-vector-search","type":2,"isActive":false},{"label":"Применение к гибридному поиску","href":"Apply-to-hybrid-search","type":2,"isActive":false}]}