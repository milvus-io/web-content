---
id: metrics_dashboard.md
title: Приборная панель метрик Milvus
summary: >-
  В этой теме рассказывается о показателях мониторинга, отображаемых на панели
  Milvus Dashboard.
---
<h1 id="Milvus-Metrics-Dashboard" class="common-anchor-header">Приборная панель метрик Milvus<button data-href="#Milvus-Metrics-Dashboard" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h1><p>Во время работы Milvus выводит список подробных метрик с временными рядами. Для визуализации метрик можно использовать <a href="https://prometheus.io/">Prometheus</a> и <a href="https://grafana.com/">Grafana</a>. В этой теме представлены метрики мониторинга, отображаемые в Grafana Milvus Dashboard.</p>
<p>Единицей времени в этой теме являются миллисекунды. А "99-й процентиль" в этой теме означает, что 99 процентов времени статистика контролируется в пределах определенного значения.</p>
<p>Для понимания метрик Prometheus мы рекомендуем сначала прочитать <a href="/docs/ru/monitor_overview.md">обзор фреймворка мониторинга Milvus</a>.</p>
<p><details><summary>Прокси</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Скорость подсчета поисковых векторов</td><td>Среднее количество векторов, запрашиваемых в секунду каждым прокси в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_proxy_search_vectors_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_search_vectors_count</code></td><td>Накопленное количество запрошенных векторов.</td></tr>
<tr><td>Insert Vector Count Rate</td><td>Среднее количество векторов, вставленных в секунду каждым прокси в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_proxy_insert_vectors_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_insert_vectors_count</code></td><td>Накопленное количество вставленных векторов.</td></tr>
<tr><td>Латентность поиска</td><td>Средняя задержка и 99-й процентиль задержки получения запросов на поиск и запрос каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_sq_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_latency</code></td><td>Задержка запросов на поиск и запросы.</td></tr>
<tr><td>Задержка поиска коллекции</td><td>Средняя задержка и 99-й процентиль задержки получения запросов поиска и запросов к определенной коллекции каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_collection_sq_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_collection_sq_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_collection_sq_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_collection_sq_latency_sum</code></td><td>Время ожидания запросов поиска и запросов к определенной коллекции</td></tr>
<tr><td>Мутационная задержка</td><td>Средняя задержка и 99-й процентиль задержки получения запросов на мутацию каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, msg_type, pod, node_id) (rate(milvus_proxy_mutation_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_mutation_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type) / sum(increase(milvus_proxy_mutation_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type)</code></td><td><code translate="no">milvus_proxy_mutation_latency_sum</code></td><td>Задержка запросов на мутацию.</td></tr>
<tr><td>Латентность мутации коллекции</td><td>Средняя задержка и 99-й процентиль задержки получения запросов мутации к определенной коллекции каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_collection_sq_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_collection_sq_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_collection_sq_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, collection_name=~&quot;$collection&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_collection_sq_latency_sum</code></td><td>Задержка запросов мутации к определенной коллекции</td></tr>
<tr><td>Задержка ожидания результатов поиска</td><td>Средняя задержка и 99-й процентиль задержки между отправкой запросов поиска и запросов и получением результатов прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_wait_result_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_sq_wait_result_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_wait_result_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_wait_result_latency</code></td><td>Задержка между отправкой запросов на поиск и получение результатов.</td></tr>
<tr><td>Уменьшить задержку результатов поиска</td><td>Средняя задержка и 99-й процентиль задержки агрегирования результатов поиска и запросов через прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_reduce_result_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_sq_reduce_result_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_reduce_result_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_reduce_result_latency</code></td><td>Задержка объединения результатов поиска и запросов, возвращаемых каждым узлом запроса.</td></tr>
<tr><td>Задержка декодирования результатов поиска</td><td>Средняя задержка и 99-й процентиль задержки декодирования результатов поиска и запросов по прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_proxy_sq_decode_result_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_sq_decode_result_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_decode_resultlatency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, query_type)</code></td><td><code translate="no">milvus_proxy_sq_decode_result_latency</code></td><td>Задержка декодирования каждого результата поиска и запроса.</td></tr>
<tr><td>Msg Stream Object Num</td><td>Среднее, максимальное и минимальное количество объектов msgstream, созданных каждым прокси на соответствующей физической теме за последние две минуты.</td><td><code translate="no">avg(milvus_proxy_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) max(milvus_proxy_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) min(milvus_proxy_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_msgstream_obj_num</code></td><td>Количество объектов msgstream, созданных в каждой физической теме.</td></tr>
<tr><td>Задержка отправки мутаций</td><td>Средняя задержка и 99-й процентиль задержки отправки запросов на вставку или удаление каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, msg_type, pod, node_id) (rate(milvus_proxy_mutation_send_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_mutation_send_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type) / sum(increase(milvus_proxy_mutation_send_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, msg_type)</code></td><td><code translate="no">milvus_proxy_mutation_send_latency</code></td><td>Задержка отправки запросов на вставку или удаление.</td></tr>
<tr><td>Скорость попадания в кэш</td><td>Средний показатель попадания в кэш операций, включая <code translate="no">GeCollectionID</code>, <code translate="no">GetCollectionInfo</code> и <code translate="no">GetCollectionSchema</code> в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_proxy_cache_hit_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, cache_state=&quot;hit&quot;}[2m])/120) by(cache_name, pod, node_id) / sum(increase(milvus_proxy_cache_hit_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by(cache_name, pod, node_id)</code></td><td><code translate="no">milvus_proxy_cache_hit_count</code></td><td>Статистика попаданий и отказов для каждой операции чтения кэша.</td></tr>
<tr><td>Задержка обновления кэша</td><td>Средняя задержка и 99-й процентиль задержки обновления кэша по прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_proxy_cache_update_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_cache_update_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id) / sum(increase(milvus_proxy_cache_update_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_cache_update_latency</code></td><td>Задержка обновления кэша каждый раз.</td></tr>
<tr><td>Время синхронизации</td><td>Среднее, максимальное и минимальное количество эпохального времени, синхронизированного каждым прокси в соответствующем физическом канале.</td><td><code translate="no">avg(milvus_proxy_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) max(milvus_proxy_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) min(milvus_proxy_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_sync_epoch_time</code></td><td>Время эпохи каждого физического канала (время Unix, миллисекунды, прошедшие с 1 января 1970 года).    <br/>    По умолчанию существует <code translate="no">ChannelName</code>, не относящийся к физическим каналам.</td></tr>
<tr><td>Применить задержку PK</td><td>Средняя задержка и 99-й процентиль задержки применения первичного ключа каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_proxy_apply_pk_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_apply_pk_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id) / sum(increase(milvus_proxy_apply_pk_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_apply_pk_latency</code></td><td>Задержка применения первичного ключа.</td></tr>
<tr><td>Задержка применения временной метки</td><td>Средняя задержка и 99-й процентиль задержки применения временной метки каждым прокси в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_proxy_apply_timestamp_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_apply_timestamp_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id) / sum(increase(milvus_proxy_apply_timestamp_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id)</code></td><td><code translate="no">milvus_proxy_apply_timestamp_latency</code></td><td>Задержка применения временной метки.</td></tr>
<tr><td>Коэффициент успешности запросов</td><td>Количество успешных запросов, полученных в секунду каждым прокси, с подробной разбивкой по типам запросов. Возможные типы запросов: DescribeCollection, DescribeIndex, GetCollectionStatistics, HasCollection, Search, Query, ShowPartitions, Insert и т. д.</td></tr>
<tr><td><code translate="no">sum(increase(milvus_proxy_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, status=&quot;success&quot;}[2m])/120) by(function_name, pod, node_id)</code></td><td><code translate="no">milvus_proxy_req_count</code></td><td>Количество всех типов полученных запросов</td></tr>
<tr><td>Частота неудачных запросов</td><td>Количество неудачных запросов, полученных в секунду каждым прокси, с подробной разбивкой по каждому типу запросов. Возможные типы запросов: DescribeCollection, DescribeIndex, GetCollectionStatistics, HasCollection, Search, Query, ShowPartitions, Insert и т. д.</td></tr>
<tr><td><code translate="no">sum(increase(milvus_proxy_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;, status=&quot;fail&quot;}[2m])/120) by(function_name, pod, node_id)</code></td><td><code translate="no">milvus_proxy_req_count</code></td><td>Количество всех типов полученных запросов</td></tr>
<tr><td>Латентность запроса</td><td>Средняя задержка и 99-й процентиль задержки всех типов принимаемых запросов каждым прокси-сервером</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id, function_name) (rate(milvus_proxy_req_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_proxy_req_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, function_name) / sum(increase(milvus_proxy_req_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (pod, node_id, function_name)</code></td><td><code translate="no">milvus_proxy_req_latency</code></td><td>Задержка всех типов запросов на получение</td></tr>
<tr><td>Количество байт запросов на вставку/удаление</td><td>Количество байт запросов на вставку и удаление, полученных прокси в секунду за последние две минуты.</td><td><code translate="no">sum(increase(milvus_proxy_receive_bytes_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by(pod, node_id)</code></td><td><code translate="no">milvus_proxy_receive_bytes_count</code></td><td>Количество запросов на вставку и удаление.</td></tr>
<tr><td>Скорость отправки байтов</td><td>Количество байт в секунду, отправленных обратно клиенту, когда каждый прокси отвечает на запросы поиска и запросов в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_proxy_send_bytes_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by(pod, node_id)</code></td><td><code translate="no">milvus_proxy_send_bytes_count</code></td><td>Количество байт, отправленных обратно клиенту, пока каждый прокси отвечает на запросы поиска и запросов.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Корневой координатор</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Количество прокси-узлов</td><td>Количество созданных прокси.</td><td><code translate="no">sum(milvus_rootcoord_proxy_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_proxy_num</code></td><td>Количество прокси-узлов.</td></tr>
<tr><td>Sync Time</td><td>Среднее, максимальное и минимальное количество эпохального времени, синхронизированного каждым корневым коордом в каждом физическом канале (PChannel).</td><td><code translate="no">avg(milvus_rootcoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) max(milvus_rootcoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) min(milvus_rootcoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_sync_epoch_time</code></td><td>Время эпохи каждого физического канала (время Unix, миллисекунды, прошедшие с 1 января 1970 года).</td></tr>
<tr><td>Скорость выполнения DDL-запросов</td><td>Состояние и количество DDL-запросов в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_rootcoord_ddl_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, function_name)</code></td><td><code translate="no">milvus_rootcoord_ddl_req_count</code></td><td>Общее количество DDL-запросов, включая <code translate="no">CreateCollection</code>, <code translate="no">DescribeCollection</code>, <code translate="no">DescribeSegments</code>, <code translate="no">HasCollection</code>, <code translate="no">ShowCollections</code>, <code translate="no">ShowPartitions</code> и <code translate="no">ShowSegments</code>.</td></tr>
<tr><td>Латентность DDL-запросов</td><td>Средняя задержка и 99-й процентиль задержки DDL-запросов за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, function_name) (rate(milvus_rootcoord_ddl_req_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_rootcoord_ddl_req_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (function_name) / sum(increase(milvus_rootcoord_ddl_req_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by (function_name)</code></td><td><code translate="no">milvus_rootcoord_ddl_req_latency</code></td><td>Задержка всех типов DDL-запросов.</td></tr>
<tr><td>Sync Timetick Latency</td><td>Средняя задержка и 99-й процентиль времени, использованного root coord для синхронизации всех временных меток с PChannel в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_rootcoord_sync_timetick_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_rootcoord_sync_timetick_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_rootcoord_sync_timetick_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m]))</code></td><td><code translate="no">milvus_rootcoord_sync_timetick_latency</code></td><td>время, использованное корневым координатором для синхронизации всех временных меток с PChannel.</td></tr>
<tr><td>Скорость распределения идентификаторов</td><td>Количество идентификаторов, присваиваемых корневым коордом в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_rootcoord_id_alloc_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120)</code></td><td><code translate="no">milvus_rootcoord_id_alloc_count</code></td><td>Накопленное количество идентификаторов, присвоенных корневым коордом.</td></tr>
<tr><td>Временная метка</td><td>Последняя временная метка корневого коорда.</td><td><code translate="no">milvus_rootcoord_timestamp{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}</code></td><td><code translate="no">milvus_rootcoord_timestamp</code></td><td>Последняя временная метка корневого координатора.</td></tr>
<tr><td>Сохраненные временные метки</td><td>Предварительно назначенные временные метки, которые root coord сохраняет в метахранилище.</td><td><code translate="no">milvus_rootcoord_timestamp_saved{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}</code></td><td><code translate="no">milvus_rootcoord_timestamp_saved</code></td><td>Предварительно назначенные временные метки, которые root coord сохраняет в метахранилище.     <br/>    Временные метки назначаются на 3 секунды раньше. Временная метка обновляется и сохраняется в метахранилище каждые 50 миллисекунд.</td></tr>
<tr><td>Количество коллекций</td><td>Общее количество коллекций.</td><td><code translate="no">sum(milvus_rootcoord_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_collection_num</code></td><td>Общее количество коллекций, существующих в Milvus на данный момент.</td></tr>
<tr><td>Partition Num</td><td>Общее количество разделов.</td><td><code translate="no">sum(milvus_rootcoord_partition_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_partition_num</code></td><td>Общее количество разделов, существующих в Milvus на данный момент.</td></tr>
<tr><td>DML Channel Num</td><td>Общее количество каналов DML.</td><td><code translate="no">sum(milvus_rootcoord_dml_channel_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_dml_channel_num</code></td><td>Общее количество каналов DML, существующих в Milvus в настоящее время.</td></tr>
<tr><td>Msgstream Num</td><td>Общее количество msgstreams.</td><td><code translate="no">sum(milvus_rootcoord_msgstream_obj_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_msgstream_obj_num</code></td><td>Общее количество msgstreams в Milvus на данный момент.</td></tr>
<tr><td>Credential Num</td><td>Общее количество учетных данных.</td><td><code translate="no">sum(milvus_rootcoord_credential_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_credential_num</code></td><td>Общее количество учетных данных в Milvus на данный момент.</td></tr>
<tr><td>Задержка временного тика</td><td>Сумма максимальной временной задержки тиков графиков потока на всех DataNodes и QueryNodes.</td><td><code translate="no">sum(milvus_rootcoord_time_tick_delay{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_rootcoord_time_tick_delay</code></td><td>Максимальная временная задержка тиков графиков потока на каждом DataNode и QueryNode.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Координатор запросов</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Collection Loaded Num</td><td>Количество коллекций, которые в данный момент загружены в память.</td><td><code translate="no">sum(milvus_querycoord_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_collection_num</code></td><td>Количество коллекций, которые в данный момент загружены Milvus.</td></tr>
<tr><td>Entity Loaded Num</td><td>Количество сущностей, загруженных в память в данный момент.</td><td><code translate="no">sum(milvus_querycoord_entity_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_entitiy_num</code></td><td>Количество сущностей, загруженных Milvus в данный момент.</td></tr>
<tr><td>Скорость запросов на загрузку</td><td>Количество запросов на загрузку в секунду за последние две минуты.</td><td><code translate="no">sum(increase(milvus_querycoord_load_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])120) by (status)</code></td><td><code translate="no">milvus_querycoord_load_req_count</code></td><td>Накопленное количество запросов на загрузку.</td></tr>
<tr><td>Скорость запросов на освобождение</td><td>Количество запросов на освобождение в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_querycoord_release_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status)</code></td><td><code translate="no">milvus_querycoord_release_req_count</code></td><td>Накопленное количество запросов на освобождение.</td></tr>
<tr><td>Латентность запросов нагрузки</td><td>Средняя задержка и 99-й процентиль задержки запросов нагрузки за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_querycoord_load_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querycoord_load_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_querycoord_load_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m]))</code></td><td><code translate="no">milvus_querycoord_load_latency</code></td><td>Время, затраченное на выполнение запроса на нагрузку.</td></tr>
<tr><td>Задержка запроса на освобождение</td><td>Средняя задержка и 99-й процентиль задержки запросов на освобождение в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_querycoord_release_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querycoord_release_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_querycoord_release_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m]))</code></td><td><code translate="no">milvus_querycoord_release_latency</code></td><td>Время, затраченное на завершение запроса на освобождение.</td></tr>
<tr><td>Задача поднагрузки</td><td>Количество задач подзагрузки.</td><td><code translate="no">sum(milvus_querycoord_child_task_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_child_task_num</code></td><td>Количество подзадач нагрузки.    <br/>    Коорд запроса разбивает запрос нагрузки на несколько подзадач.</td></tr>
<tr><td>Родительское задание нагрузки</td><td>Количество родительских заданий нагрузки.</td><td><code translate="no">sum(milvus_querycoord_parent_task_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_parent_task_num</code></td><td>Количество подзадач.    <br/>    Каждый запрос нагрузки соответствует родительской задаче в очереди задач.</td></tr>
<tr><td>Латентность подзадач нагрузки</td><td>Средняя задержка и 99-й процентиль задержки задачи подзагрузки за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le) (rate(milvus_querycoord_child_task_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querycoord_child_task_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) / sum(increase(milvus_querycoord_child_task_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) namespace&quot;}[2m])))</code></td><td><code translate="no">milvus_querycoord_child_task_latency</code></td><td>Время ожидания завершения задачи подзагрузки.</td></tr>
<tr><td>Query Node Num</td><td>Количество узлов запроса, управляемых коорд. запросом.</td><td><code translate="no">sum(milvus_querycoord_querynode_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_querycoord_querynode_num</code></td><td>Количество узлов запроса, управляемых координатором запроса.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Узел запроса</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Collection Loaded Num</td><td>Количество коллекций, загруженных в память каждым узлом запроса.</td><td><code translate="no">sum(milvus_querynode_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_collection_num</code></td><td>Количество коллекций, загруженных каждым узлом запроса.</td></tr>
<tr><td>Partition Loaded Num</td><td>Количество разделов, загруженных в память каждым узлом запроса.</td><td><code translate="no">sum(milvus_querynode_partition_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_partition_num</code></td><td>Количество разделов, загруженных каждым узлом запроса.</td></tr>
<tr><td>Segment Loaded Num</td><td>Количество сегментов, загруженных в память каждым узлом запроса.</td><td><code translate="no">sum(milvus_querynode_segment_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_segment_num</code></td><td>Количество сегментов, загруженных каждым узлом запроса.</td></tr>
<tr><td>Queryable Entity Num</td><td>Количество сущностей, доступных для запроса и поиска, на каждом узле запроса.</td><td><code translate="no">sum(milvus_querynode_entity_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_entity_num</code></td><td>Количество сущностей, доступных для запроса и поиска, на каждом узле запроса.</td></tr>
<tr><td>Виртуальный канал DML</td><td>Количество виртуальных каналов DML, просматриваемых каждым узлом запроса.</td><td><code translate="no">sum(milvus_querynode_dml_vchannel_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_dml_vchannel_num</code></td><td>Количество виртуальных каналов DML, просматриваемых каждым узлом запроса.</td></tr>
<tr><td>Виртуальный дельта-канал</td><td>Количество дельта-каналов, просматриваемых каждым узлом запроса.</td><td><code translate="no">sum(milvus_querynode_delta_vchannel_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_delta_vchannel_num</code></td><td>Количество дельта-каналов, просматриваемых каждым узлом запроса.</td></tr>
<tr><td>Количество потребителей</td><td>Количество потребителей в каждом узле запроса.</td><td><code translate="no">sum(milvus_querynode_consumer_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_consumer_num</code></td><td>Количество потребителей в каждом узле запроса.</td></tr>
<tr><td>Количество поисковых запросов</td><td>Общее количество запросов на поиск и запрос, полученных в секунду каждым узлом запроса, и количество успешных запросов на поиск и запрос за последние две минуты.</td><td><code translate="no">sum(increase(milvus_querynode_sq_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (query_type, status, pod, node_id)</code></td><td><code translate="no">milvus_querynode_sq_req_count</code></td><td>Накопленное количество запросов поиска и запросов.</td></tr>
<tr><td>Латентность поисковых запросов</td><td>Средняя задержка и 99-й процентиль времени, затраченного на поиск и запросы каждым узлом запроса в течение последних двух минут.    <br/>    На этой панели отображается задержка запросов поиска и запросов, статус которых "успех" или "итог".</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_sq_req_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_sq_req_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_req_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_req_latency</code></td><td>Задержка поисковых запросов узла запроса.</td></tr>
<tr><td>Латентность поиска в очереди</td><td>Средняя задержка и 99-й процентиль задержки запросов поиска и запросов в очереди за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id, query_type) (rate(milvus_querynode_sq_queue_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_sq_queue_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_queue_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_queue_latency</code></td><td>Задержка запросов поиска и запросов, полученных узлом запроса.</td></tr>
<tr><td>Латентность поискового сегмента</td><td>Средняя задержка и 99-й процентиль времени, затраченного узлом запроса на поиск и запрос сегмента в течение последних двух минут.    <br/>    Статус сегмента может быть закрытым или растущим.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, segment_state, pod, node_id) (rate(milvus_querynode_sq_segment_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_sq_segment_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type, segment_state) / sum(increase(milvus_querynode_sq_segment_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type, segment_state)</code></td><td><code translate="no">milvus_querynode_sq_segment_latency</code></td><td>Время, затрачиваемое узлом запроса на поиск и запрос каждого сегмента.</td></tr>
<tr><td>Задержка запроса сегмента</td><td>Средняя задержка и 99-й процентиль времени, затраченного каждым узлом запроса на поиск и запрос в сегменте за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, query_type, pod, node_id) (rate(milvus_querynode_sq_core_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_sq_core_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_core_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_core_latency</code></td><td>Время, затрачиваемое каждым узлом запроса на поиск и запрос в segcore.</td></tr>
<tr><td>Латентность уменьшения поиска</td><td>Средняя задержка и 99-й процентиль времени, использованного каждым узлом запроса на этапе уменьшения поиска или запроса в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id, query_type) (rate(milvus_querynode_sq_reduce_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_sq_reduce_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type) / sum(increase(milvus_querynode_sq_reduce_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id, query_type)</code></td><td><code translate="no">milvus_querynode_sq_reduce_latency</code></td><td>Время, затрачиваемое каждым запросом на этапе уменьшения.</td></tr>
<tr><td>Латентность сегмента нагрузки</td><td>Средняя задержка и 99-й процентиль времени, затрачиваемого каждым узлом запроса на загрузку сегмента за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_load_segment_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_load_segment_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_load_segment_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>Время, затрачиваемое каждым узлом запроса на загрузку сегмента.</td></tr>
<tr><td>Flowgraph Num</td><td>Количество графов потока в каждом узле запроса.</td><td><code translate="no">sum(milvus_querynode_flowgraph_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_flowgraph_num</code></td><td>Количество графов потока в каждом узле запроса.</td></tr>
<tr><td>Длина очереди нерешенных задач чтения</td><td>Длина очереди неразрешенных запросов на чтение в каждом узле запроса.</td><td><code translate="no">sum(milvus_querynode_read_task_unsolved_len{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_read_task_unsolved_len</code></td><td>Длина очереди неразрешенных запросов на чтение.</td></tr>
<tr><td>Длина готовой задачи чтения</td><td>Длина очереди запросов на чтение, которые должны быть выполнены в каждом узле запроса.</td><td><code translate="no">sum(milvus_querynode_read_task_ready_len{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_read_task_ready_len</code></td><td>Длина очереди запросов на чтение, подлежащих выполнению.</td></tr>
<tr><td>Parallel Read Task Num</td><td>Количество параллельных запросов на чтение, выполняемых в настоящее время в каждом узле запроса.</td><td><code translate="no">sum(milvus_querynode_read_task_concurrency{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_read_task_concurrency</code></td><td>Количество параллельных запросов на чтение, выполняемых в данный момент.</td></tr>
<tr><td>Оценка использования ЦП</td><td>Использование ЦП каждым узлом запроса, оцененное планировщиком.</td><td><code translate="no">sum(milvus_querynode_estimate_cpu_usage{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_estimate_cpu_usage</code></td><td>Использование процессора каждым узлом запроса, оцененное планировщиком.     <br/>    Если значение равно 100, это означает, что используется целый виртуальный процессор (vCPU).</td></tr>
<tr><td>Размер группы поиска</td><td>Среднее число и 99-й процентиль размера группы поиска (т. е. общее число исходных поисковых запросов в совокупности поисковых запросов, выполняемых каждым узлом запроса) за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_size_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_search_group_size_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_size_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>Количество оригинальных поисковых задач среди объединенных поисковых задач из разных ведер (т. е. размер поисковой группы).</td></tr>
<tr><td>Поиск NQ</td><td>Среднее число и 99-й процентиль количества запросов (NQ), выполненных каждым узлом запроса в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_size_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_search_group_size_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_size_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td>milvus_querynode_load_segment_latency_bucket</td><td>Количество запросов (NQ) поисковых запросов.</td></tr>
<tr><td>Группа поиска NQ</td><td>Среднее число и 99-й процентиль NQ поисковых запросов, объединенных и выполненных каждым узлом запроса в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_nq_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_search_group_nq_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_nq_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>NQ поисковых запросов, объединенных из разных ведер.</td></tr>
<tr><td>Search Top_K</td><td>Среднее число и 99-й процентиль <code translate="no">Top_K</code> поисковых запросов, выполненных каждым узлом запроса за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_topk_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_search_topk_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_topk_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td>Число <code translate="no">Top_K</code> поисковых запросов.</td></tr>
<tr><td>Поисковая группа Top_K</td><td>Среднее число и 99-й процентиль <code translate="no">Top_K</code> поисковых запросов, объединенных и выполненных каждым узлом запроса за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_querynode_search_group_topk_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_querynode_search_group_topk_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_querynode_search_group_topk_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_querynode_load_segment_latency_bucket</code></td><td><code translate="no">Top_K</code> поисковых запросов, объединенных из разных ведер.</td></tr>
<tr><td>Количество вытесненных запросов на чтение</td><td>Количество запросов на чтение, отклоняемых в секунду каждым узлом запроса в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_querynode_read_evicted_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_querynode_sq_req_count</code></td><td>Накопленное количество запросов на чтение, отклоненных узлом запроса из-за ограничения трафика.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Координатор данных</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Data Node Num</td><td>Количество узлов данных, управляемых data coord.</td><td><code translate="no">sum(milvus_datacoord_datanode_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_datanode_num</code></td><td>Количество узлов данных, управляемых координатором данных.</td></tr>
<tr><td>Segment Num</td><td>Количество всех типов сегментов, записанных в метаданных data coord.</td><td><code translate="no">sum(milvus_datacoord_segment_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (segment_state)</code></td><td><code translate="no">milvus_datacoord_segment_num</code></td><td>Количество всех типов сегментов, записанных в метаданных data coord.    <br/>    Типы сегментов включают: сброшенные, смытые, промытые, растущие и запечатанные.</td></tr>
<tr><td>Количество коллекций</td><td>Количество коллекций, записанных в метаданные по коорд. данным.</td><td><code translate="no">sum(milvus_datacoord_collection_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_collection_num</code></td><td>Количество коллекций, записанных в метаданных по коорд. данным.</td></tr>
<tr><td>Stored Rows</td><td>Накопленное количество строк валидных и промытых данных в коорд. данных.</td><td><code translate="no">sum(milvus_datacoord_stored_rows_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_stored_rows_num</code></td><td>Накопленное количество строк валидных и смытых данных в коорд. данных.</td></tr>
<tr><td>Stored Rows Rate</td><td>Среднее количество строк, выгружаемых в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_datacoord_stored_rows_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (pod, node_id)</code></td><td><code translate="no">milvus_datacoord_stored_rows_count</code></td><td>Накопленное количество строк, промытых в data coord.</td></tr>
<tr><td>Время синхронизации</td><td>Среднее, максимальное и минимальное количество эпохального времени синхронизации данных в каждом физическом канале.</td><td><code translate="no">avg(milvus_datacoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) max(milvus_datacoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance) min(milvus_datacoord_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_sync_epoch_time</code></td><td>Время эпохи каждого физического канала (время Unix, миллисекунды, прошедшие с 1 января 1970 года).</td></tr>
<tr><td>Размер хранимого бинлога</td><td>Общий размер хранимого бинлога.</td><td><code translate="no">sum(milvus_datacoord_stored_binlog_size{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_datacoord_stored_binlog_size</code></td><td>Общий размер бинлога, хранящегося в Milvus.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Узел данных</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Flowgraph Num</td><td>Количество объектов flowgraph, соответствующих каждому узлу данных.</td><td><code translate="no">sum(milvus_datanode_flowgraph_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_flowgraph_num</code></td><td>Количество объектов flowgraph.     <br/>    Каждый шард в коллекции соответствует объекту flowgraph.</td></tr>
<tr><td>Скорость потребления строк сообщений</td><td>Количество строк потоковых сообщений, потребляемых в секунду каждым узлом данных в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_datanode_msg_rows_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (msg_type, pod, node_id)</code></td><td><code translate="no">milvus_datanode_msg_rows_count</code></td><td>Количество потребленных строк потоковых сообщений.     <br/>    В настоящее время потоковые сообщения, подсчитываемые по узлам данных, включают только сообщения о вставке и удалении.</td></tr>
<tr><td>Скорость передачи данных при промывке</td><td>Размер каждого смываемого сообщения, регистрируемого в секунду каждым узлом данных в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_datanode_flushed_data_size{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (msg_type, pod, node_id)</code></td><td><code translate="no">milvus_datanode_flushed_data_size</code></td><td>Размер каждого переданного сообщения.    <br/>    В настоящее время потоковые сообщения, подсчитанные по узлам данных, включают только сообщения о вставке и удалении.</td></tr>
<tr><td>Количество потребителей</td><td>Количество потребителей, созданных на каждом узле данных.</td><td><code translate="no">sum(milvus_datanode_consumer_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_consumer_num</code></td><td>Количество потребителей, созданных на каждом узле данных.     <br/>    Каждый поток соответствует одному потребителю.</td></tr>
<tr><td>Producer Num</td><td>Количество производителей, созданных на каждом узле данных.</td><td><code translate="no">sum(milvus_datanode_producer_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_producer_num</code></td><td>Количество потребителей, созданных на каждом узле данных.     <br/>    Каждому осколку в коллекции соответствует производитель дельта-канала и производитель канала timetick.</td></tr>
<tr><td>Время синхронизации</td><td>Среднее, максимальное и минимальное количество времени эпохи, синхронизированное каждым узлом данных во всех физических темах.</td><td><code translate="no">avg(milvus_datanode_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) max(milvus_datanode_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id) min(milvus_datanode_sync_epoch_time{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_sync_epoch_time</code></td><td>Время эпохи (время Unix, миллисекунды, прошедшие с 1 января 1970 года) каждой физической темы на узле данных.</td></tr>
<tr><td>Число непромытых сегментов</td><td>Количество непромытых сегментов, созданных на каждом узле данных.</td><td><code translate="no">sum(milvus_datanode_unflushed_segment_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (pod, node_id)</code></td><td><code translate="no">milvus_datanode_unflushed_segment_num</code></td><td>Количество непромытых сегментов, созданных на каждом узле данных.</td></tr>
<tr><td>Encode Buffer Latency</td><td>Средняя задержка и 99-й процентиль времени, затраченного на кодирование буфера каждым узлом данных за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_datanode_encode_buffer_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_datanode_encode_buffer_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_datanode_encode_buffer_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_datanode_encode_buffer_latency</code></td><td>Время, затрачиваемое каждым узлом данных на кодирование буфера.</td></tr>
<tr><td>Задержка сохранения данных</td><td>Средняя задержка и 99-й процентиль времени, затраченного на запись буфера в слой хранения каждым узлом данных за последние две минуты.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_datanode_save_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_datanode_save_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_datanode_save_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_datanode_save_latency</code></td><td>Время, затрачиваемое каждым узлом данных на запись буфера в слой хранения.</td></tr>
<tr><td>Частота операций промывки</td><td>Количество раз, которое каждый узел данных промывает буфер в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_datanode_flush_buffer_op_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_datanode_flush_buffer_op_count</code></td><td>Накопленное количество раз, когда узел данных промывает буфер.</td></tr>
<tr><td>Скорость работы автопромывки</td><td>Количество раз автопромывки буфера каждым узлом данных в секунду за последние две минуты.</td><td><code translate="no">sum(increase(milvus_datanode_autoflush_buffer_op_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_datanode_autoflush_buffer_op_count</code></td><td>Накопленное количество раз автоматической очистки буфера узлом данных.</td></tr>
<tr><td>Скорость запроса на промывку</td><td>Количество раз, когда каждый узел данных получает запрос на промывку буфера в секунду за последние две минуты.</td><td><code translate="no">sum(increase(milvus_datanode_flush_req_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_datanode_flush_req_count</code></td><td>Накопленное количество раз, когда узел данных получает запрос на промывку от координатора данных.</td></tr>
<tr><td>Латентность уплотнения</td><td>Средняя задержка и 99-й процентиль времени, затрачиваемого каждым узлом данных на выполнение задачи уплотнения в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_datanode_compaction_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_datanode_compaction_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_datanode_compaction_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_datanode_compaction_latency</code></td><td>Время, необходимое каждому узлу данных для выполнения задачи уплотнения.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Индексный координатор</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Index Request Rate</td><td>Среднее количество запросов на построение индекса, полученных в секунду за последние две минуты.</td><td><code translate="no">sum(increase(milvus_indexcoord_indexreq_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status)</code></td><td><code translate="no">milvus_indexcoord_indexreq_count</code></td><td>Количество полученных запросов на построение индекса.</td></tr>
<tr><td>Index Task Count</td><td>Количество всех задач индексирования, записанных в метаданных индекса.</td><td><code translate="no">sum(milvus_indexcoord_indextask_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (index_task_status)</code></td><td><code translate="no">milvus_indexcoord_indextask_count</code></td><td>Количество всех задач индексирования, записанных в метаданных индекса.</td></tr>
<tr><td>Index Node Num</td><td>Количество управляемых индексных узлов.</td><td><code translate="no">sum(milvus_indexcoord_indexnode_num{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}) by (app_kubernetes_io_instance)</code></td><td><code translate="no">milvus_indexcoord_indexnode_num</code></td><td>Количество управляемых индексных узлов.</td></tr>
</tbody>
</table>
<p></details></p>
<p><details><summary>Индексный узел</summary></p>
<table>
<thead>
<tr><th>Панель</th><th>Описание панели</th><th>PromQL (язык запросов Prometheus)</th><th>Используемые метрики Milvus</th><th>Описание метрик Milvus</th></tr>
</thead>
<tbody>
<tr><td>Index Task Rate</td><td>Среднее количество заданий на построение индекса, получаемых каждым индексным узлом в секунду в течение последних двух минут.</td><td><code translate="no">sum(increase(milvus_indexnode_index_task_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])/120) by (status, pod, node_id)</code></td><td><code translate="no">milvus_indexnode_index_task_count</code></td><td>Количество полученных заданий на построение индекса.</td></tr>
<tr><td>Латентность поля загрузки</td><td>Средняя задержка и 99-й процентиль времени, затраченного каждым индексным узлом на загрузку данных сегментного поля каждый раз в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_load_field_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_indexnode_load_field_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_load_field_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_load_field_latency</code></td><td>Время, затраченное индексным узлом на загрузку данных сегментного поля.</td></tr>
<tr><td>Задержка декодирования поля</td><td>Средняя задержка и 99-й процентиль времени, использованного каждым индексным узлом для кодирования данных поля каждый раз в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_decode_field_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_indexnode_decode_field_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_decode_field_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_decode_field_latency</code></td><td>Время, затраченное на декодирование полевых данных.</td></tr>
<tr><td>Задержка построения индекса</td><td>Средняя задержка и 99-й процентиль времени, использованного каждым индексным узлом для построения индексов в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_build_index_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_indexnode_build_index_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_build_index_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_build_index_latency</code></td><td>Время, затраченное на создание индексов.</td></tr>
<tr><td>Латентность индекса кодирования</td><td>Средняя задержка и 99-й процентиль времени, использованного каждым индексным узлом для кодирования индексных файлов в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_encode_index_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_indexnode_encode_index_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_encode_index_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_encode_index_latency</code></td><td>Время, затраченное на кодирование индексных файлов.</td></tr>
<tr><td>Задержка сохранения индекса</td><td>Средняя задержка и 99-й процентиль времени, использованного каждым индексным узлом для сохранения индексных файлов в течение последних двух минут.</td><td>p99: <br/> <code translate="no">histogram_quantile(0.99, sum by (le, pod, node_id) (rate(milvus_indexnode_save_index_latency_bucket{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])))</code> <br/> avg: <br/> <code translate="no">sum(increase(milvus_indexnode_save_index_latency_sum{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id) / sum(increase(milvus_indexnode_save_index_latency_count{app_kubernetes_io_instance=~&quot;$instance&quot;, app_kubernetes_io_name=&quot;$app_name&quot;, namespace=&quot;$namespace&quot;}[2m])) by(pod, node_id)</code></td><td><code translate="no">milvus_indexnode_save_index_latency</code></td><td>Время, затраченное на сохранение индексных файлов.</td></tr>
</tbody>
</table>
<p></details></p>
