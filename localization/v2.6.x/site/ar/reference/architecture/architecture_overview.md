---
id: architecture_overview.md
summary: >-
  يوفر Milvus قاعدة بيانات متجهات سريعة وموثوقة ومستقرة مصممة خصيصًا للبحث عن
  التشابه والذكاء الاصطناعي.
title: نظرة عامة على بنية ميلفوس
---
<h1 id="Milvus-Architecture-Overview" class="common-anchor-header">نظرة عامة على بنية ميلفوس<button data-href="#Milvus-Architecture-Overview" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h1><p>Milvus هي قاعدة بيانات متجهية <strong>مفتوحة المصدر</strong> <strong>ومفتوحة</strong> <strong>المصدر</strong> ومصممة للبحث عن التشابه عالي الأداء في مجموعات البيانات المتجهة الضخمة. تم تصميمه على رأس مكتبات البحث المتجه الشائعة بما في ذلك Faiss وHNSW وDiskANN وSCANN، وهو يمكّن تطبيقات الذكاء الاصطناعي وسيناريوهات استرجاع البيانات غير المنظمة. قبل المتابعة، تعرّف على <a href="/docs/ar/glossary.md">المبادئ الأساسية</a> لاسترجاع التضمين.</p>
<h2 id="Architecture-Diagram" class="common-anchor-header">مخطط الهندسة المعمارية<button data-href="#Architecture-Diagram" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يوضح الرسم البياني التالي بنية Milvus عالية المستوى، ويعرض تصميمها المعياري والقابل للتطوير والسحابة الأصلية مع طبقات تخزين وحوسبة مفصّلة بالكامل.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/milvus_architecture_2_6.png" alt="Architecture_diagram" class="doc-image" id="architecture_diagram" />
   </span> <span class="img-wrapper"> <span>مخطط_العمارة</span> </span></p>
<h2 id="Architectural-Principles" class="common-anchor-header">المبادئ المعمارية<button data-href="#Architectural-Principles" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>تتبع Milvus مبدأ تجزئة مستوى البيانات ومستوى التحكم، وتتألف من أربع طبقات رئيسية مستقلة عن بعضها البعض من حيث قابلية التوسع والتعافي من الكوارث. تتيح هذه البنية ذات التخزين المشترك مع طبقات التخزين والحوسبة المفصّلة بالكامل إمكانية التوسع الأفقي لعقد الحوسبة مع تنفيذ Woodpecker كطبقة WAL خالية من الأقراص لزيادة المرونة وتقليل النفقات التشغيلية.</p>
<p>من خلال فصل معالجة الدفق إلى عقدة التدفق ومعالجة الدُفعات إلى عقدة الاستعلام وعقدة البيانات، تحقق Milvus أداءً عاليًا مع تلبية متطلبات المعالجة في الوقت الفعلي في الوقت نفسه.</p>
<h2 id="Detailed-Layer-Architecture" class="common-anchor-header">بنية الطبقة التفصيلية<button data-href="#Detailed-Layer-Architecture" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><h3 id="Layer-1-Access-Layer" class="common-anchor-header">الطبقة 1: طبقة الوصول</h3><p>تتألف طبقة الوصول من مجموعة من الوكلاء عديمي الحالة، وهي الطبقة الأمامية للنظام ونقطة النهاية للمستخدمين. تتحقق من صحة طلبات العميل وتقلل من النتائج التي يتم إرجاعها:</p>
<ul>
<li>الوكيل في حد ذاته عديم الحالة. يوفر عنوان خدمة موحد باستخدام مكونات موازنة التحميل مثل Nginx و Kubernetes Ingress و NodePort و LVS.</li>
<li>نظرًا لأن Milvus يستخدم بنية معالجة متوازية على نطاق واسع (MPP)، يقوم الوكيل بتجميع النتائج الوسيطة ومعالجتها لاحقًا قبل إعادة النتائج النهائية إلى العميل.</li>
</ul>
<h3 id="Layer-2-Coordinator" class="common-anchor-header">الطبقة 2: المنسق</h3><p>يعمل المنسق بمثابة عقل ميلفوس. في أي لحظة، يكون منسق واحد فقط نشطًا عبر المجموعة بأكملها، ويكون مسؤولاً عن الحفاظ على طوبولوجيا المجموعة، وجدولة جميع أنواع المهام، والتعهد بالاتساق على مستوى المجموعة.</p>
<p>فيما يلي بعض المهام التي يتولاها <strong>المنسق</strong>:</p>
<ul>
<li><strong>إدارة لغة تعريف البيانات (DDL/DCL) / لغة تعريف البيانات (DDL) / إدارة العمليات المؤقتة</strong>: يتعامل مع طلبات لغة تعريف البيانات (DDL) ولغة التحكم في البيانات (DCL)، مثل إنشاء أو حذف المجموعات أو الأقسام أو الفهارس، بالإضافة إلى إدارة الطابع الزمني أوراكل (TSO) وإصدار شريط الوقت.</li>
<li><strong>إدارة خدمة التدفق</strong>: يربط سجل الكتابة المسبق (WAL) مع عقد البث ويوفر اكتشاف الخدمة لخدمة البث.</li>
<li><strong>إدارة الاستعلام</strong>: تدير الطوبولوجيا وموازنة التحميل لعقد الاستعلام، وتوفر وتدير طرق عرض الاستعلامات المقدمة لتوجيه توجيه الاستعلام.</li>
<li><strong>إدارة البيانات التاريخية</strong>: توزع المهام غير المتصلة بالإنترنت مثل الضغط وبناء الفهرس على عقد البيانات، وتدير طوبولوجيا المقاطع وطرق عرض البيانات.</li>
</ul>
<h3 id="Layer-3-Worker-Nodes" class="common-anchor-header">الطبقة 3: العقد العاملة</h3><p>الأذرع والأرجل. العُقد العاملة هي عبارة عن منفِّذات غبية تتبع تعليمات المنسق. العقد العاملة عديمة الحالة بفضل الفصل بين التخزين والحوسبة، ويمكنها تسهيل توسيع نطاق النظام واستعادة القدرة على العمل بعد الكوارث عند نشرها على Kubernetes. هناك ثلاثة أنواع من العقد العاملة:</p>
<h3 id="Streaming-node" class="common-anchor-header">عقدة التدفق</h3><p>تعمل عقدة التدفق بمثابة "الدماغ المصغر" على مستوى الشاردة، حيث توفر ضمانات الاتساق على مستوى الشاردة واستعادة الأخطاء استنادًا إلى تخزين WAL الأساسي. وفي الوقت نفسه، فإن عقدة الدفق مسؤولة أيضًا عن زيادة الاستعلام عن البيانات وإنشاء خطط الاستعلام. بالإضافة إلى ذلك، فهي تتعامل أيضًا مع تحويل البيانات المتنامية إلى بيانات مختومة (تاريخية).</p>
<h3 id="Query-node" class="common-anchor-header">عقدة الاستعلام</h3><p>تقوم عقدة الاستعلام بتحميل البيانات التاريخية من تخزين الكائن، وتوفر الاستعلام عن البيانات التاريخية.</p>
<h3 id="Data-node" class="common-anchor-header">عقدة البيانات</h3><p>عقدة البيانات مسؤولة عن معالجة البيانات التاريخية دون اتصال بالإنترنت، مثل الضغط وبناء الفهرس.</p>
<h3 id="Layer-4-Storage" class="common-anchor-header">الطبقة 4: التخزين</h3><p>التخزين هو عظمة النظام، وهو المسؤول عن ثبات البيانات. وتتألف من التخزين التعريفي ووسيط السجل وتخزين الكائنات.</p>
<h3 id="Meta-storage" class="common-anchor-header">التخزين التعريفي</h3><p>يقوم التخزين التعريفي بتخزين لقطات من البيانات الوصفية مثل مخطط المجموعة ونقاط التحقق من استهلاك الرسائل. يتطلب تخزين البيانات الوصفية توافرًا عاليًا للغاية واتساقًا قويًا ودعمًا للمعاملات، لذلك اختار Milvus موقع etcd للتخزين التعريفي. كما تستخدم ميلفوس أيضًا مخزن إلخd لتسجيل الخدمة والتحقق من صحتها.</p>
<h3 id="Object-storage" class="common-anchor-header">تخزين الكائنات</h3><p>يخزن تخزين الكائنات ملفات لقطات من السجلات، وملفات الفهرس للبيانات القياسية والمتجهة، ونتائج الاستعلام الوسيطة. يستخدم Milvus MinIO كتخزين كائنات ويمكن نشره بسهولة على AWS S3 و Azure Blob، وهما من أكثر خدمات التخزين شيوعًا وفعالية من حيث التكلفة في العالم. ومع ذلك، يتميز تخزين الكائنات بزمن وصول عالٍ ويتقاضى رسومًا حسب عدد الاستعلامات. ولتحسين أدائها وخفض التكاليف، تخطط ميلفوس لتنفيذ فصل البيانات الباردة عن الساخنة على ذاكرة أو تجمع ذاكرة تخزين مؤقت قائم على SSD.</p>
<h3 id="WAL-storage" class="common-anchor-header">تخزين WAL</h3><p>تخزين سجل الكتابة المسبق (WAL) هو أساس متانة البيانات واتساقها في الأنظمة الموزعة. قبل إجراء أي تغيير، يتم تسجيله أولاً في السجل - مما يضمن أنه في حالة حدوث عطل، يمكنك استرداد البيانات من حيث توقفت بالضبط.</p>
<p>تتضمن تطبيقات WAL الشائعة Kafka وPulsar وWoodpecker. على عكس الحلول التقليدية القائمة على الأقراص، يتبنى Woodpecker تصميمًا سحابيًا أصليًا خالٍ من الأقراص يكتب مباشرةً إلى تخزين الكائنات. يتناسب هذا النهج مع احتياجاتك دون عناء ويبسط العمليات من خلال إزالة النفقات العامة لإدارة الأقراص المحلية.</p>
<p>من خلال تسجيل كل عملية كتابة في وقت مبكر، تضمن طبقة WAL آلية موثوقة على مستوى النظام للاسترداد والاتساق - بغض النظر عن مدى تعقيد بيئتك الموزعة.</p>
<h2 id="Data-Flow-and-API-Categories" class="common-anchor-header">فئات تدفق البيانات وواجهة برمجة التطبيقات<button data-href="#Data-Flow-and-API-Categories" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>تصنف واجهات برمجة التطبيقات Milvus حسب وظيفتها وتتبع مسارات محددة من خلال البنية:</p>
<table>
<thead>
<tr><th>فئة واجهة برمجة التطبيقات</th><th>العمليات</th><th>أمثلة على واجهات برمجة التطبيقات</th><th>تدفق البنية</th></tr>
</thead>
<tbody>
<tr><td><strong>DDL/DCL</strong></td><td>المخطط والتحكم في الوصول</td><td><code translate="no">createCollection</code> <code translate="no">dropCollection</code> ، <code translate="no">hasCollection</code> <code translate="no">createPartition</code></td><td>طبقة الوصول → المنسق</td></tr>
<tr><td><strong>DML</strong></td><td>التلاعب بالبيانات</td><td><code translate="no">insert</code> <code translate="no">delete</code>, <code translate="no">upsert</code></td><td>طبقة الوصول → عقدة عامل التدفق</td></tr>
<tr><td><strong>DQL</strong></td><td>استعلام البيانات</td><td><code translate="no">search</code>, <code translate="no">query</code></td><td>طبقة الوصول → عقدة عامل الدُفعات (عقد الاستعلام)</td></tr>
</tbody>
</table>
<h3 id="Example-Data-Flow-Search-Operation" class="common-anchor-header">مثال على تدفق البيانات: عملية البحث</h3><ol>
<li>يرسل العميل طلب بحث عبر SDK/واجهة برمجة تطبيقات SDK/واجهة برمجة تطبيقات ريستفول</li>
<li>يقوم موازن التحميل بتوجيه الطلب إلى وكيل متاح في طبقة الوصول</li>
<li>يستخدم الوكيل ذاكرة التخزين المؤقت للتوجيه لتحديد العُقد المستهدفة؛ لا يتصل بالمنسق إلا إذا كانت ذاكرة التخزين المؤقت غير متوفرة</li>
<li>يقوم الوكيل بإعادة توجيه الطلب إلى عقد التدفق المناسبة، والتي تنسق بعد ذلك مع عقد الاستعلام للبحث عن البيانات المختومة أثناء تنفيذ البحث عن البيانات المتزايدة محليًا</li>
<li>تقوم عُقد الاستعلام بتحميل المقاطع المختومة من مخزن الكائنات حسب الحاجة وإجراء بحث على مستوى المقطع</li>
<li>تخضع نتائج البحث لاختزال متعدد المستويات تقوم عقد الاستعلام بتقليل النتائج عبر قطاعات متعددة، وتقوم عقد التدفق بتقليل النتائج من عقد الاستعلام، ويقوم الوكيل بتقليل النتائج من جميع عقد التدفق قبل العودة إلى العميل</li>
</ol>
<h3 id="Example-Data-Flow-Data-Insertion" class="common-anchor-header">مثال على تدفق البيانات: إدراج البيانات</h3><ol>
<li>يرسل العميل طلب إدراج مع بيانات متجهة</li>
<li>تقوم طبقة الوصول بالتحقق من صحة الطلب وإعادة توجيهه إلى عقدة التدفق</li>
<li>تسجل عقدة التدفق العملية إلى مخزن WAL للتخزين من أجل المتانة</li>
<li>تتم معالجة البيانات في الوقت الفعلي وإتاحتها للاستعلامات</li>
<li>عندما تصل المقاطع إلى السعة، تقوم عقدة الدفق بتشغيل التحويل إلى مقاطع مختومة</li>
<li>تتعامل عقدة البيانات مع الضغط وتنشئ فهارس فوق المقاطع المختومة، وتخزن النتائج في مخزن الكائنات</li>
<li>تقوم عُقد الاستعلام بتحميل الفهارس المبنية حديثًا واستبدال البيانات المتزايدة المقابلة</li>
</ol>
<h2 id="Whats-Next" class="common-anchor-header">ما التالي<button data-href="#Whats-Next" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><ul>
<li>استكشف <a href="/docs/ar/main_components.md">المكونات الرئيسية</a> لمعرفة تفاصيل التنفيذ التفصيلية</li>
<li>تعرّف على سير عمل <a href="/docs/ar/data_processing.md">معالجة البيانات</a> واستراتيجيات التحسين</li>
<li>فهم <a href="/docs/ar/consistency.md">نموذج الاتساق</a> وضمانات المعاملات في ميلفوس</li>
</ul>
