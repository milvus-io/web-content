---
id: data_processing.md
summary: تعرف على إجراءات معالجة البيانات في ميلفوس.
title: معالجة البيانات
---
<h1 id="Data-Processing" class="common-anchor-header">معالجة البيانات<button data-href="#Data-Processing" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h1><p>تقدم هذه المقالة وصفًا تفصيليًا لتنفيذ عملية إدخال البيانات وبناء الفهرس والاستعلام عن البيانات في ميلفوس.</p>
<h2 id="Data-insertion" class="common-anchor-header">إدراج البيانات<button data-href="#Data-insertion" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يمكنك اختيار عدد الأجزاء التي تستخدمها مجموعة ما في ميلفوس - كل جزء يعيّن إلى قناة افتراضية<em>(vchannel</em>). كما هو موضح أدناه، يقوم Milvus بعد ذلك بتعيين كل <em>قناة افتراضية</em> إلى قناة فعلية<em>(pchannel</em>)، وترتبط كل <em>قناة pchannel</em> بعقدة تدفق محددة.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/pvchannel_wal.png" alt="VChannel PChannel and StreamingNode" class="doc-image" id="vchannel-pchannel-and-streamingnode" />
   </span> <span class="img-wrapper"> <span>قناة VChannel PCChannel وعقدة البث PCNode</span> </span></p>
<p>بعد التحقق من البيانات، يقوم الوكيل بتقسيم الرسالة المكتوبة إلى حزم بيانات مختلفة من الأجزاء وفقًا لقواعد توجيه الأجزاء المحددة.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/channels_1.png" alt="Channels 1" class="doc-image" id="channels-1" />
   </span> <span class="img-wrapper"> <span>القنوات 1</span> </span></p>
<p>ثم يتم إرسال البيانات المكتوبة لجزء واحد<em>(قناة vchannel</em>) إلى عقدة التدفق المقابلة لـ <em>pchannel</em>.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/written_data_flow.png" alt="write flow" class="doc-image" id="write-flow" />
   </span> <span class="img-wrapper"> <span>تدفق الكتابة</span> </span></p>
<p>تقوم عقدة الدفق بتعيين أوراكل الطابع الزمني (TSO) لكل حزمة بيانات لإنشاء ترتيب إجمالي للعمليات. تقوم بإجراء فحوصات الاتساق على الحمولة قبل كتابتها في سجل الكتابة المسبق الأساسي (WAL). بمجرد أن يتم الالتزام بالبيانات بشكل دائم في WAL، يتم ضمان عدم ضياعها - حتى في حالة حدوث عطل، يمكن لعقدة الدفق إعادة تشغيل WAL لاستعادة جميع العمليات المعلقة بالكامل.</p>
<p>وفي الوقت نفسه، تقوم StreamingNode أيضًا بتقطيع إدخالات WAL الملتزم بها بشكل غير متزامن إلى مقاطع منفصلة. هناك نوعان من المقاطع:</p>
<ul>
<li><strong>المقطع المتزايد</strong>: أي بيانات لم يتم إدخالها مسبقًا في مخزن الكائنات.</li>
<li>المقطع<strong>المختوم</strong>: جميع البيانات التي تم حفظها في مخزن الكائن، وتكون بيانات المقطع المختوم غير قابلة للتغيير.</li>
</ul>
<p>يسمى الانتقال من مقطع متزايد إلى مقطع مغلق بالتدفق. تقوم عقدة الدفق بتشغيل التدفق بمجرد أن تستوعب وتكتب جميع إدخالات WAL المتاحة لهذا المقطع - أي عندما لا يكون هناك المزيد من السجلات المعلقة في سجل الكتابة الأمامي الأساسي - وعندها يتم إنهاء المقطع وجعله محسّنًا للقراءة.</p>
<h2 id="Index-building" class="common-anchor-header">بناء الفهرس<button data-href="#Index-building" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يتم بناء الفهرس بواسطة عقدة البيانات. لتجنب بناء الفهرس المتكرر لتحديثات البيانات، يتم تقسيم المجموعة في ميلفوس إلى شرائح لكل منها فهرسها الخاص.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/index_building.png" alt="Index building" class="doc-image" id="index-building" />
   </span> <span class="img-wrapper"> <span>بناء الفهرس</span> </span></p>
<p>يدعم Milvus بناء الفهرس لكل حقل متجه وحقل قياسي وحقل أساسي. يتفاعل كل من مدخلات ومخرجات بناء الفهرس مع تخزين الكائنات: تقوم عقدة البيانات بتحميل لقطات السجل للفهرسة من مقطع (موجود في وحدة تخزين الكائنات) إلى الذاكرة، ثم تقوم بإلغاء تسلسل البيانات والبيانات الوصفية المقابلة لبناء الفهرس، ثم تقوم بتسلسل الفهرس عند اكتمال بناء الفهرس، ثم تقوم بكتابته مرة أخرى إلى وحدة تخزين الكائنات.</p>
<p>يتضمن بناء الفهرس بشكل أساسي عمليات متجهة ومصفوفة، وبالتالي فهو يتطلب عمليات حسابية وذاكرة مكثفة. لا يمكن فهرسة المتجهات بكفاءة باستخدام الفهارس التقليدية القائمة على الأشجار بسبب طبيعتها عالية الأبعاد، ولكن يمكن فهرستها بتقنيات أكثر نضجًا في هذا الموضوع، مثل الفهارس القائمة على المجموعات أو الرسم البياني. وبغض النظر عن نوعها، يتضمن بناء الفهرس عمليات حسابية تكرارية ضخمة للمتجهات واسعة النطاق، مثل Kmeans أو اجتياز الرسم البياني.</p>
<p>على عكس الفهرسة للبيانات القياسية، يجب أن يستفيد بناء فهرس المتجهات استفادة كاملة من تسريع SIMD (تعليمات واحدة، بيانات متعددة). لدى Milvus دعم فطري لمجموعات تعليمات SIMD، على سبيل المثال، SSE وAVX2 وAVX512. ونظراً لطبيعة "الزوبعة" وطبيعة بناء الفهرس المتجه التي تستهلك الكثير من الموارد، تصبح المرونة مهمة بشكل حاسم لميلفوس من الناحية الاقتصادية. ستعمل إصدارات Milvus المستقبلية على إجراء المزيد من الاستكشافات في الحوسبة غير المتجانسة والحوسبة بدون خادم لخفض التكاليف ذات الصلة.</p>
<p>إلى جانب ذلك، يدعم Milvus أيضًا التصفية العددية والاستعلام عن الحقل الأساسي. يحتوي على فهارس مدمجة لتحسين كفاءة الاستعلام، على سبيل المثال، فهارس مرشح بلوم، وفهارس التجزئة، والفهارس القائمة على الشجرة، والفهارس المقلوبة، ويخطط لتقديم المزيد من الفهارس الخارجية، مثل فهارس الصور النقطية والفهارس التقريبية.</p>
<h2 id="Data-query" class="common-anchor-header">استعلام البيانات<button data-href="#Data-query" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يشير الاستعلام عن البيانات إلى عملية البحث في مجموعة محددة عن عدد <em>k</em> من المتجهات الأقرب إلى متجه مستهدف أو عن <em>جميع</em> المتجهات ضمن نطاق مسافة محددة إلى المتجه. يتم إرجاع المتجهات مع المفتاح الأساسي والحقول المقابلة لها.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/data_query.jpg" alt="Data query" class="doc-image" id="data-query" />
   </span> <span class="img-wrapper"> <span>استعلام البيانات</span> </span></p>
<p>تنقسم المجموعة في ميلفوس إلى قطاعات متعددة؛ تقوم عقدة التدفق بتحميل قطاعات متزايدة وتحتفظ بالبيانات في الوقت الفعلي، بينما تقوم عقد الاستعلام بتحميل قطاعات مغلقة.</p>
<p>عند وصول طلب استعلام/بحث، يقوم الوكيل ببث الطلب إلى جميع عقد الدفق المسؤولة عن الأجزاء ذات الصلة للبحث المتزامن.</p>
<p>عند وصول طلب استعلام، يطلب الوكيل بشكل متزامن من عقد الدفق التي تحتوي على الأجزاء المقابلة لتنفيذ البحث.</p>
<p>تُنشئ كل عقدة تدفق خطة استعلام، وتبحث في بياناتها المحلية المتزايدة، وتتصل في الوقت نفسه بعُقد الاستعلام البعيدة لاسترداد النتائج التاريخية، ثم تجمعها في نتيجة جزء واحد.</p>
<p>أخيرًا، يجمع الوكيل جميع نتائج الأجزاء ويدمجها في النتيجة النهائية ويعيدها إلى العميل.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="/docs/v2.6.x/assets/handoff.png" alt="Handoff" class="doc-image" id="handoff" />
   </span> <span class="img-wrapper"> <span>التسليم</span> </span></p>
<p>عندما يتم مسح الجزء المتنامي على عقدة تدفق إلى جزء مغلق - أو عندما تكمل عقدة البيانات عملية ضغط - يبدأ المنسق عملية تسليم لتحويل تلك البيانات المتنامية إلى بيانات تاريخية. ثم يقوم المنسق بعد ذلك بتوزيع المقاطع المختومة بالتساوي على جميع عقد الاستعلام، وموازنة استخدام الذاكرة، والنفقات الزائدة لوحدة المعالجة المركزية، وعدد المقاطع، وإصدار أي مقطع زائد عن الحاجة.</p>
<h2 id="Whats-next" class="common-anchor-header">ما التالي<button data-href="#Whats-next" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><ul>
<li>تعرف على كيفية <a href="https://milvus.io/blog/deep-dive-5-real-time-query.md">استخدام قاعدة بيانات Milvus المتجهة للاستعلام في الوقت الفعلي</a>.</li>
<li>تعرف على كيفية <a href="https://milvus.io/blog/deep-dive-4-data-insertion-and-data-persistence.md">إدراج البيانات واستمرار البيانات في ملفوس</a>.</li>
<li>تعرف على كيفية <a href="https://milvus.io/blog/deep-dive-3-data-processing.md">معالجة البيانات في ملفوس</a>.</li>
</ul>
