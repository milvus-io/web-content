{"codeList":["snowsql -a ${instance_name} -u ${user_name}\n","USE ROLE ACCOUNTADMIN;\nCREATE SECURITY INTEGRATION SNOWSERVICES_INGRESS_OAUTH\n  TYPE=oauth\n  OAUTH_CLIENT=snowservices_ingress\n  ENABLED=true;\n  \nUSE ROLE ACCOUNTADMIN;\nGRANT BIND SERVICE ENDPOINT ON ACCOUNT TO ROLE SYSADMIN;\n","USE ROLE SECURITYADMIN;\nCREATE ROLE MILVUS_ROLE;\n\nUSE ROLE USERADMIN;\nCREATE USER milvus_user\n  PASSWORD='milvususerok'\n  DEFAULT_ROLE = MILVUS_ROLE\n  DEFAULT_SECONDARY_ROLES = ('ALL')\n  MUST_CHANGE_PASSWORD = FALSE;\n  \nUSE ROLE SECURITYADMIN;\nGRANT ROLE MILVUS_ROLE TO USER milvus_user;\n","USE ROLE SYSADMIN;\nCREATE OR REPLACE WAREHOUSE MILVUS_WAREHOUSE WITH\nWAREHOUSE_SIZE='X-SMALL'\nAUTO_SUSPEND = 180\nAUTO_RESUME = true\nINITIALLY_SUSPENDED=false;\n\nUSE ROLE SYSADMIN;\nCREATE DATABASE IF NOT EXISTS MILVUS_DEMO;\nUSE DATABASE MILVUS_DEMO;\nCREATE IMAGE REPOSITORY MILVUS_DEMO.PUBLIC.MILVUS_REPO;\nCREATE OR REPLACE STAGE YAML_STAGE;\nCREATE OR REPLACE STAGE DATA ENCRYPTION = (TYPE = 'SNOWFLAKE_SSE');\nCREATE OR REPLACE STAGE FILES ENCRYPTION = (TYPE = 'SNOWFLAKE_SSE');\n","USE ROLE SECURITYADMIN;\nGRANT ALL PRIVILEGES ON DATABASE MILVUS_DEMO TO MILVUS_ROLE;\nGRANT ALL PRIVILEGES ON SCHEMA MILVUS_DEMO.PUBLIC TO MILVUS_ROLE;\nGRANT ALL PRIVILEGES ON WAREHOUSE MILVUS_WAREHOUSE TO MILVUS_ROLE;\nGRANT ALL PRIVILEGES ON STAGE MILVUS_DEMO.PUBLIC.FILES TO MILVUS_ROLE;\n","USE ROLE ACCOUNTADMIN;\nUSE DATABASE MILVUS_DEMO;\nUSE SCHEMA PUBLIC;\nCREATE NETWORK RULE allow_all_rule\nTYPE = 'HOST_PORT'\nMODE= 'EGRESS'\nVALUE_LIST = ('0.0.0.0:443','0.0.0.0:80');\n\nCREATE EXTERNAL ACCESS INTEGRATION allow_all_eai\nALLOWED_NETWORK_RULES=(allow_all_rule)\nENABLED=TRUE;\n\nGRANT USAGE ON INTEGRATION allow_all_eai TO ROLE SYSADMIN;\n","cd ${repo_git_root_path}\ndocker build --rm --no-cache --platform linux/amd64 -t milvus ./images/milvus\ndocker build --rm --no-cache --platform linux/amd64 -t jupyter ./images/jupyter\n","docker login ${instance_name}.registry.snowflakecomputing.com -u ${user_name}\n","docker tag milvus ${instance_name}.registry.snowflakecomputing.com/milvus_demo/public/milvus_repo/milvus\ndocker tag jupyter ${instance_name}.registry.snowflakecomputing.com/milvus_demo/public/milvus_repo/jupyter\n","docker images | grep milvus\n\n${instance_name}.registry.snowflakecomputing.com/milvus_demo/public/milvus_repo/milvus    latest        3721bbb8f62b   2 days ago    2.95GB\n${instance_name}.registry.snowflakecomputing.com/milvus_demo/public/milvus_repo/jupyter   latest        20633f5bcadf   2 days ago    2GB\n","docker push ${instance_name}.registry.snowflakecomputing.com/milvus_demo/public/milvus_repo/milvus\ndocker push ${instance_name}.registry.snowflakecomputing.com/milvus_demo/public/milvus_repo/jupyter\n","USE ROLE SYSADMIN;\nCREATE COMPUTE POOL IF NOT EXISTS MILVUS_COMPUTE_POOL\n  MIN_NODES = 1\n  MAX_NODES = 1\n  INSTANCE_FAMILY = CPU_X64_S\n  AUTO_RESUME = true;\nCREATE COMPUTE POOL IF NOT EXISTS JUPYTER_COMPUTE_POOL\n  MIN_NODES = 1\n  MAX_NODES = 1\n  INSTANCE_FAMILY = CPU_X64_S\n  AUTO_RESUME = true;\n","DESCRIBE COMPUTE POOL MILVUS_COMPUTE_POOL;\nDESCRIBE COMPUTE POOL JUPYTER_COMPUTE_POOL;\n","PUT file://${path/to/jupyter.yaml} @yaml_stage overwrite=true auto_compress=false;\nPUT file://${path/to/milvus.yaml} @yaml_stage overwrite=true auto_compress=false;\n","USE ROLE SYSADMIN;\nUSE DATABASE MILVUS_DEMO;\nUSE SCHEMA PUBLIC;\n\nCREATE SERVICE MILVUS\n  IN COMPUTE POOL MILVUS_COMPUTE_POOL \n  FROM @YAML_STAGE\n  SPEC='milvus.yaml'\n  MIN_INSTANCES=1\n  MAX_INSTANCES=1;\n\nCREATE SERVICE JUPYTER\n  IN COMPUTE POOL JUPYTER_COMPUTE_POOL \n  FROM @YAML_STAGE\n  SPEC='jupyter.yaml'\n  MIN_INSTANCES=1\n  MAX_INSTANCES=1;\n","SHOW SERVICES;\n\n+---------+---------------+-------------+----------+----------------------+--------------------------------------------------------+-----------------\n| name    | database_name | schema_name | owner    | compute_pool         | dns_name                                               | ......\n|---------+---------------+-------------+----------+----------------------+--------------------------------------------------------+-----------------\n| JUPYTER | MILVUS_DEMO   | PUBLIC      | SYSADMIN | JUPYTER_COMPUTE_POOL | jupyter.public.milvus-demo.snowflakecomputing.internal | ...... \n| MILVUS  | MILVUS_DEMO   | PUBLIC      | SYSADMIN | MILVUS_COMPUTE_POOL  | milvus.public.milvus-demo.snowflakecomputing.internal  | ......\n+---------+---------------+-------------+----------+----------------------+--------------------------------------------------------+-----------------\n","USE ROLE SECURITYADMIN;\nGRANT USAGE ON SERVICE MILVUS_DEMO.PUBLIC.JUPYTER TO ROLE MILVUS_ROLE;\n","USE ROLE SYSADMIN;\nSHOW ENDPOINTS IN SERVICE MILVUS_DEMO.PUBLIC.JUPYTER;\n","docs = [\n    \"Artificial intelligence was founded as an academic discipline in 1956.\",\n    \"Alan Turing was the first person to conduct substantial research in AI.\",\n    \"Born in Maida Vale, London, Turing was raised in southern England.\",\n]\n","USE ROLE ACCOUNTADMIN;\nDROP USER milvus_user;\n\nUSE ROLE SYSADMIN;\nDROP SERVICE MILVUS;\nDROP SERVICE JUPYTER;\n\nDROP COMPUTE POOL MILVUS_COMPUTE_POOL;\nDROP COMPUTE POOL JUPYTER_COMPUTE_POOL;\n\nDROP IMAGE REPOSITORY MILVUS_DEMO.PUBLIC.MILVUS_REPO;\nDROP DATABASE MILVUS_DEMO;\nDROP WAREHOUSE MILVUS_WAREHOUSE;\n\nUSE ROLE ACCOUNTADMIN;\nDROP ROLE MILVUS_ROLE;\nDROP SECURITY INTEGRATION SNOWSERVICES_INGRESS_OAUTH;\n"],"headingContent":"Milvus on Snowpark Container Services","anchorList":[{"label":"Milvus on Snowpark Container Services","href":"Milvus-on-Snowpark-Container-Services","type":1,"isActive":false},{"label":"About Snowpark Container Services","href":"About-Snowpark-Container-Services","type":2,"isActive":false},{"label":"Configure Milvus demo","href":"Configure-Milvus-demo","type":2,"isActive":false},{"label":"Use Notebook","href":"Use-Notebook","type":2,"isActive":false},{"label":"7. Clean up","href":"7-Clean-up","type":2,"isActive":false},{"label":"About Milvus","href":"About-Milvus","type":2,"isActive":false}]}