{"codeList":["$ git clone https://github.com/prometheus-operator/kube-prometheus.git\n$ cd kube-prometheus\n$ kubectl apply --server-side -f manifests/setup\n$ kubectl wait \\\n        --for condition=Established \\\n        --all CustomResourceDefinition \\\n        --namespace=monitoring\n$ kubectl apply -f manifests/\n","kubectl patch clusterrole prometheus-k8s --type=json -p='[{\"op\": \"add\", \"path\": \"/rules/-\", \"value\": {\"apiGroups\": [\"\"], \"resources\": [\"pods\", \"services\", \"endpoints\"], \"verbs\": [\"get\", \"watch\", \"list\"]}}]'\n","$ kubectl --namespace monitoring --address 0.0.0.0 port-forward svc/prometheus-k8s 9090\n$ kubectl --namespace monitoring --address 0.0.0.0 port-forward svc/grafana 3000\n","$ helm upgrade my-release milvus/milvus --set metrics.serviceMonitor.enabled=true --reuse-values\n","$ kubectl get servicemonitor\n","NAME                           AGE\nmy-release-milvus              54s\n"],"headingContent":"Deploying Monitoring Services on Kubernetes","anchorList":[{"label":"在 Kubernetes 上部署监控服务","href":"Deploying-Monitoring-Services-on-Kubernetes","type":1,"isActive":false},{"label":"使用 Prometheus 监控指标","href":"Monitor-metrics-with-Prometheus","type":2,"isActive":false},{"label":"前提条件","href":"Prerequisites","type":2,"isActive":false},{"label":"在 Kubernetes 上部署监控服务","href":"Deploy-monitoring-services-on-Kubernetes","type":2,"isActive":false},{"label":"下一步","href":"Whats-next","type":2,"isActive":false}]}