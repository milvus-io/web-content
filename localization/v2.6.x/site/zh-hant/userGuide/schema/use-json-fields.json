{"codeList":["{\n  \"metadata\": {\n    \"category\": \"electronics\",\n    \"brand\": \"BrandA\",\n    \"in_stock\": true,\n    \"price\": 99.99,\n    \"string_price\": \"99.99\",\n    \"tags\": [\"clearance\", \"summer_sale\"],\n    \"supplier\": {\n      \"name\": \"SupplierX\",\n      \"country\": \"USA\",\n      \"contact\": {\n        \"email\": \"support@supplierx.com\",\n        \"phone\": \"+1-800-555-0199\"\n      }\n    }\n  }\n}\n","from pymilvus import MilvusClient, DataType\n\nclient = MilvusClient(uri=\"http://localhost:19530\")\n\n# Create schema with a JSON field\nschema = client.create_schema(auto_id=False, enable_dynamic_field=True)\n\nschema.add_field(field_name=\"product_id\", datatype=DataType.INT64, is_primary=True)\nschema.add_field(field_name=\"vector\", datatype=DataType.FLOAT_VECTOR, dim=5)\n# highlight-next-line\nschema.add_field(field_name=\"metadata\", datatype=DataType.JSON, nullable=True)  # JSON field that allows null values\n\nclient.create_collection(\n    collection_name=\"product_catalog\",\n    schema=schema\n)\n","import io.milvus.v2.client.*;\nimport io.milvus.v2.service.collection.request.CreateCollectionReq;\nimport io.milvus.v2.service.collection.request.AddFieldReq;\n\nConnectConfig config = ConnectConfig.builder()\n        .uri(\"http://localhost:19530\")\n        .build();\nMilvusClientV2 client = new MilvusClientV2(config);\n\nCreateCollectionReq.CollectionSchema schema = CreateCollectionReq.CollectionSchema.builder()\n        .enableDynamicField(true)\n        .build();\n        \nschema.addField(AddFieldReq.builder()\n        .fieldName(\"product_id\")\n        .dataType(DataType.Int64)\n        .isPrimaryKey(Boolean.TRUE)\n        .build());\nschema.addField(AddFieldReq.builder()\n        .fieldName(\"vector\")\n        .dataType(DataType.FloatVector)\n        .dimension(5)\n        .build());\nschema.addField(AddFieldReq.builder()\n        .fieldName(\"metadata\")\n        .dataType(DataType.JSON)\n        .isNullable(true)\n        .build());\n        \nCreateCollectionReq requestCreate = CreateCollectionReq.builder()\n        .collectionName(\"product_catalog\")\n        .collectionSchema(schema)\n        .build();\nclient.createCollection(requestCreate);\n","import { MilvusClient, DataType } from '@zilliz/milvus2-sdk-node';\n\nconst client = new MilvusClient({\n  address: 'localhost:19530'\n});\n\n// Create collection\nawait client.createCollection({\ncollection_name: \"product_catalog\",\nfields: [\n  {\n    name: \"product_id\",\n    data_type: DataType.Int64,\n    is_primary_key: true,\n    autoID: false\n  },\n  {\n    name: \"vector\",\n    data_type: DataType.FloatVector,\n    dim: 5\n  },\n  {\n    name: \"metadata\",\n    data_type: DataType.JSON,\n    nullable: true  // JSON field that allows null values\n  }\n],\nenable_dynamic_field: true\n});\n\n","import (\n    \"context\"\n\n    \"github.com/milvus-io/milvus/client/v2/entity\"\n    \"github.com/milvus-io/milvus/client/v2/milvusclient\"\n)\n\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\nclient, err := milvusclient.New(ctx, &milvusclient.ClientConfig{\n    Address: \"localhost:19530\",\n})\nif err != nil {\n    return err\n}\n\nschema := entity.NewSchema().WithDynamicFieldEnabled(true)\nschema.WithField(entity.NewField().\n    WithName(\"product_id\").pk\n    WithDataType(entity.FieldTypeInt64).\n    WithIsPrimaryKey(true),\n).WithField(entity.NewField().\n    WithName(\"vector\").\n    WithDataType(entity.FieldTypeFloatVector).\n    WithDim(5),\n).WithField(entity.NewField().\n    WithName(\"metadata\").\n    WithDataType(entity.FieldTypeJSON).\n    WithNullable(true),\n)\n\nerr = client.CreateCollection(ctx, milvusclient.NewCreateCollectionOption(\"product_catalog\", schema))\nif err != nil {\n    return err\n}\n","# restful\nexport TOKEN=\"root:Milvus\"\nexport CLUSTER_ENDPOINT=\"http://localhost:19530\"\n\n# 字段定义\nexport productIdField='{\n  \"fieldName\": \"product_id\",\n  \"dataType\": \"Int64\",\n  \"isPrimary\": true,\n  \"autoID\": false\n}'\n\nexport vectorField='{\n  \"fieldName\": \"vector\",\n  \"dataType\": \"FloatVector\",\n  \"typeParams\": {\n    \"dim\": 5\n  }\n}'\n\nexport metadataField='{\n  \"fieldName\": \"metadata\",\n  \"dataType\": \"JSON\",\n  \"isNullable\": true\n}'\n\n# 构造 schema\nexport schema=\"{\n  \\\"autoID\\\": false,\n  \\\"enableDynamicField\\\": true,\n  \\\"fields\\\": [\n    $productIdField,\n    $vectorField,\n    $metadataField\n  ]\n}\"\n\n# 创建集合\ncurl --request POST \\\n--url \"${CLUSTER_ENDPOINT}/v2/vectordb/collections/create\" \\\n--header \"Authorization: Bearer ${TOKEN}\" \\\n--header \"Content-Type: application/json\" \\\n--data \"{\n  \\\"collectionName\\\": \\\"product_catalog\\\",\n  \\\"schema\\\": $schema\n}\"\n\n","entities = [\n    {\n        \"product_id\": 1,\n        \"vector\": [0.1, 0.2, 0.3, 0.4, 0.5],\n        \"metadata\": {\n            \"category\": \"electronics\",\n            \"brand\": \"BrandA\",\n            \"in_stock\": True,\n            \"price\": 99.99,\n            \"string_price\": \"99.99\",\n            \"tags\": [\"clearance\", \"summer_sale\"],\n            \"supplier\": {\n                \"name\": \"SupplierX\",\n                \"country\": \"USA\",\n                \"contact\": {\n                    \"email\": \"support@supplierx.com\",\n                    \"phone\": \"+1-800-555-0199\"\n                }\n            }\n        }\n    }\n]\n\nclient.insert(collection_name=\"product_catalog\", data=entities)\n","import com.google.gson.Gson;\nimport com.google.gson.JsonObject;\n\nimport io.milvus.v2.service.vector.request.InsertReq;\n\nGson gson = new Gson();\nJsonObject row = new JsonObject();\nrow.addProperty(\"product_id\", 1);\nrow.add(\"vector\", gson.toJsonTree(Arrays.asList(0.1, 0.2, 0.3, 0.4, 0.5)));\n\nJsonObject metadata = new JsonObject();\nmetadata.addProperty(\"category\", \"electronics\");\nmetadata.addProperty(\"brand\", \"BrandA\");\nmetadata.addProperty(\"in_stock\", true);\nmetadata.addProperty(\"price\", 99.99);\nmetadata.addProperty(\"string_price\", \"99.99\");\nmetadata.add(\"tags\", gson.toJsonTree(Arrays.asList(\"clearance\", \"summer_sale\")));\n\nJsonObject supplier = new JsonObject();\nsupplier.addProperty(\"name\", \"SupplierX\");\nsupplier.addProperty(\"country\", \"USA\");\n\nJsonObject contact = new JsonObject();\ncontact.addProperty(\"email\", \"support@supplierx.com\");\ncontact.addProperty(\"phone\", \"+1-800-555-0199\");\n\nsupplier.add(\"contact\", contact);\nmetadata.add(\"supplier\", supplier);\nrow.add(\"metadata\", metadata);\n\nclient.insert(InsertReq.builder()\n        .collectionName(\"product_catalog\")\n        .data(Collections.singletonList(row))\n        .build());\n","const entities = [\n    {\n        \"product_id\": 1,\n        \"vector\": [0.1, 0.2, 0.3, 0.4, 0.5],\n        \"metadata\": {\n            \"category\": \"electronics\",\n            \"brand\": \"BrandA\",\n            \"in_stock\": True,\n            \"price\": 99.99,\n            \"string_price\": \"99.99\",\n            \"tags\": [\"clearance\", \"summer_sale\"],\n            \"supplier\": {\n                \"name\": \"SupplierX\",\n                \"country\": \"USA\",\n                \"contact\": {\n                    \"email\": \"support@supplierx.com\",\n                    \"phone\": \"+1-800-555-0199\"\n                }\n            }\n        }\n    }\n]\n\nawait client.insert({\n    collection_name: \"product_catalog\", \n    data: entities\n});\n","_, err = client.Insert(ctx, milvusclient.NewColumnBasedInsertOption(\"product_catalog\").\n    WithInt64Column(\"product_id\", []int64{1}).\n    WithFloatVectorColumn(\"vector\", 5, [][]float32{\n        {0.1, 0.2, 0.3, 0.4, 0.5},\n    }).WithColumns(\n    column.NewColumnJSONBytes(\"metadata\", [][]byte{\n        []byte(`{\n            \"category\": \"electronics\",\n            \"brand\": \"BrandA\",\n            \"in_stock\": True,\n            \"price\": 99.99,\n            \"string_price\": \"99.99\",\n            \"tags\": [\"clearance\", \"summer_sale\"],\n            \"supplier\": {\n                \"name\": \"SupplierX\",\n                \"country\": \"USA\",\n                \"contact\": {\n                    \"email\": \"support@supplierx.com\",\n                    \"phone\": \"+1-800-555-0199\"\n                }\n            }\n        }`),\n    }),\n))\nif err != nil {\n    return err\n}\n","# restful\nexport TOKEN=\"root:Milvus\"\nexport CLUSTER_ENDPOINT=\"http://localhost:19530\"\n\nexport entities='[\n  {\n    \"product_id\": 1,\n    \"vector\": [0.1, 0.2, 0.3, 0.4, 0.5],\n    \"metadata\": {\n      \"category\": \"electronics\",\n      \"brand\": \"BrandA\",\n      \"in_stock\": true,\n      \"price\": 99.99,\n      \"string_price\": \"99.99\",\n      \"tags\": [\"clearance\", \"summer_sale\"],\n      \"supplier\": {\n        \"name\": \"SupplierX\",\n        \"country\": \"USA\",\n        \"contact\": {\n          \"email\": \"support@supplierx.com\",\n          \"phone\": \"+1-800-555-0199\"\n        }\n      }\n    }\n  }\n]'\n\ncurl --request POST \\\n--url \"${CLUSTER_ENDPOINT}/v2/vectordb/collections/product_catalog/insert\" \\\n--header \"Authorization: Bearer ${TOKEN}\" \\\n--header \"Content-Type: application/json\" \\\n--data \"{\n  \\\"data\\\": $entities\n}\"\n\n","# Index the category field as a string\nindex_params = client.prepare_index_params()\n\nindex_params.add_index(\n    field_name=\"metadata\",\n    # highlight-next-line\n    index_type=\"AUTOINDEX\", # Must be set to AUTOINDEX or INVERTED for JSON path indexing\n    index_name=\"category_index\",  # Unique index name\n    # highlight-start\n    params={\n        \"json_path\": \"metadata[\\\"category\\\"]\", # Path to the JSON key to be indexed\n        \"json_cast_type\": \"varchar\" # Data cast type\n    }\n    # highlight-end\n)\n\n# Index the tags array as string array\nindex_params.add_index(\n    field_name=\"metadata\",\n    # highlight-next-line\n    index_type=\"AUTOINDEX\", # Must be set to AUTOINDEX or INVERTED for JSON path indexing\n    index_name=\"tags_array_index\", # Unique index name\n    # highlight-start\n    params={\n        \"json_path\": \"metadata[\\\"tags\\\"]\", # Path to the JSON key to be indexed\n        \"json_cast_type\": \"array_varchar\" # Data cast type\n    }\n    # highlight-end\n)\n","import io.milvus.v2.common.IndexParam;\n\nMap<String,Object> extraParams1 = new HashMap<>();\nextraParams1.put(\"json_path\", \"metadata[\\\"category\\\"]\");\nextraParams1.put(\"json_cast_type\", \"varchar\");\nindexParams.add(IndexParam.builder()\n        .fieldName(\"metadata\")\n        .indexName(\"category_index\")\n        .indexType(IndexParam.IndexType.AUTOINDEX)\n        .extraParams(extraParams1)\n        .build());\n\nMap<String,Object> extraParams2 = new HashMap<>();\nextraParams2.put(\"json_path\", \"metadata[\\\"tags\\\"]\");\nextraParams2.put(\"json_cast_type\", \"array_varchar\");\nindexParams.add(IndexParam.builder()\n        .fieldName(\"metadata\")\n        .indexName(\"tags_array_index\")\n        .indexType(IndexParam.IndexType.AUTOINDEX)\n        .extraParams(extraParams2)\n        .build());\n","const indexParams = [\n  {\n    collection_name: \"product_catalog\",\n    field_name: \"metadata\",\n    index_name: \"category_index\",\n    index_type: \"AUTOINDEX\", // Can also use \"INVERTED\" for JSON path indexing\n    extra_params: {\n      json_path: 'metadata[\"category\"]',\n      json_cast_type: \"varchar\",\n    },\n  },\n  {\n    collection_name: \"product_catalog\",\n    field_name: \"metadata\",\n    index_name: \"tags_array_index\",\n    index_type: \"AUTOINDEX\", // Can also use \"INVERTED\" for JSON path indexing\n    extra_params: {\n      json_path: 'metadata[\"tags\"]',\n      json_cast_type: \"array_varchar\",\n    },\n  },\n];\n\n","import (\n    \"github.com/milvus-io/milvus/client/v2/index\"\n)\n\njsonIndex1 := index.NewJSONPathIndex(index.AUTOINDEX, \"varchar\", `metadata[\"category\"]`)\n    .WithIndexName(\"category_index\")\njsonIndex2 := index.NewJSONPathIndex(index.AUTOINDEX, \"array_varchar\", `metadata[\"tags\"]`)\n    .WithIndexName(\"tags_array_index\")\n\nindexOpt1 := milvusclient.NewCreateIndexOption(\"product_catalog\", \"metadata\", jsonIndex1)\nindexOpt2 := milvusclient.NewCreateIndexOption(\"product_catalog\", \"metadata\", jsonIndex2)\n","# restful\nexport categoryIndex='{\n  \"fieldName\": \"metadata\",\n  \"indexName\": \"category_index\",\n  \"params\": {\n    \"index_type\": \"AUTOINDEX\",\n    \"json_path\": \"metadata[\\\\\\\"category\\\\\\\"]\",\n    \"json_cast_type\": \"varchar\"\n  }\n}'\n\nexport tagsArrayIndex='{\n  \"fieldName\": \"metadata\",\n  \"indexName\": \"tags_array_index\",\n  \"params\": {\n    \"index_type\": \"AUTOINDEX\",\n    \"json_path\": \"metadata[\\\\\\\"tags\\\\\\\"]\",\n    \"json_cast_type\": \"array_varchar\"\n  }\n}'\n","# Convert string numbers to double for indexing\nindex_params.add_index(\n    field_name=\"metadata\",\n    # highlight-next-line\n    index_type=\"AUTOINDEX\", # Must be set to AUTOINDEX or INVERTED for JSON path indexing\n    index_name=\"string_to_double_index\", # Unique index name\n    params={\n        \"json_path\": \"metadata[\\\"string_price\\\"]\", # Path to the JSON key to be indexed\n        \"json_cast_type\": \"double\", # Data cast type\n        # highlight-next-line\n        \"json_cast_function\": \"STRING_TO_DOUBLE\" # Cast function; case insensitive\n    }\n)\n","Map<String,Object> extraParams3 = new HashMap<>();\nextraParams3.put(\"json_path\", \"metadata[\\\"string_price\\\"]\");\nextraParams3.put(\"json_cast_type\", \"double\");\nextraParams3.put(\"json_cast_function\", \"STRING_TO_DOUBLE\");\nindexParams.add(IndexParam.builder()\n        .fieldName(\"metadata\")\n        .indexName(\"string_to_double_index\")\n        .indexType(IndexParam.IndexType.AUTOINDEX)\n        .extraParams(extraParams3)\n        .build());\n","indexParams.push({\n  collection_name: \"product_catalog\",\n  field_name: \"metadata\",\n  index_name: \"string_to_double_index\",\n  index_type: \"AUTOINDEX\", // Can also use \"INVERTED\"\n  extra_params: {\n    json_path: 'metadata[\"string_price\"]',\n    json_cast_type: \"double\",\n    json_cast_function: \"STRING_TO_DOUBLE\", // Case insensitive\n  },\n});\n\n","jsonIndex3 := index.NewJSONPathIndex(index.AUTOINDEX, \"double\", `metadata[\"string_price\"]`)\n                    .WithIndexName(\"string_to_double_index\")\n\nindexOpt3 := milvusclient.NewCreateIndexOption(\"product_catalog\", \"metadata\", jsonIndex3)\n\n","# restful\nexport stringToDoubleIndex='{\n  \"fieldName\": \"metadata\",\n  \"indexName\": \"string_to_double_index\",\n  \"params\": {\n    \"index_type\": \"AUTOINDEX\",\n    \"json_path\": \"metadata[\\\\\\\"string_price\\\\\\\"]\",\n    \"json_cast_type\": \"double\",\n    \"json_cast_function\": \"STRING_TO_DOUBLE\"\n  }\n}'\n","client.create_index(\n    collection_name=\"product_catalog\",\n    index_params=index_params\n)\n","import io.milvus.v2.service.index.request.CreateIndexReq;\n\nclient.createIndex(CreateIndexReq.builder()\n        .collectionName(\"product_catalog\")\n        .indexParams(indexParams)\n        .build());\n","await client.createIndex(indexParams)\n","indexTask1, err := client.CreateIndex(ctx, indexOpt1)\nif err != nil {\n    return err\n}\nindexTask2, err := client.CreateIndex(ctx, indexOpt2)\nif err != nil {\n    return err\n}\nindexTask3, err := client.CreateIndex(ctx, indexOpt3)\nif err != nil {\n    return err\n}\n","# restful\nexport indexParams=\"[\n  $categoryIndex,\n  $tagsArrayIndex,\n  $stringToDoubleIndex\n]\"\ncurl --request POST \\\n--url \"${CLUSTER_ENDPOINT}/v2/vectordb/indexes/create\" \\\n--header \"Authorization: Bearer ${TOKEN}\" \\\n--header \"Content-Type: application/json\" \\\n--data \"{\n  \\\"collectionName\\\": \\\"product_catalog\\\",\n  \\\"indexParams\\\": $indexParams\n}\"\n","filter = 'metadata[\"category\"] == \"electronics\"'\nfilter = 'metadata[\"price\"] > 50'\nfilter = 'json_contains(metadata[\"tags\"], \"featured\")'\n","String filter = 'metadata[\"category\"] == \"electronics\"';\nString filter = 'metadata[\"price\"] > 50';\nString filter = 'json_contains(metadata[\"tags\"], \"featured\")';\n","let filter = 'metadata[\"category\"] == \"electronics\"'\nlet filter = 'metadata[\"price\"] > 50'\nlet filter = 'json_contains(metadata[\"tags\"], \"featured\")'\n","filter := 'metadata[\"category\"] == \"electronics\"'\nfilter := 'metadata[\"price\"] > 50'\nfilter := 'json_contains(metadata[\"tags\"], \"featured\")'\n","# restful\nexport filterCategory='metadata[\"category\"] == \"electronics\"'\nexport filterPrice='metadata[\"price\"] > 50'\nexport filterTags='json_contains(metadata[\"tags\"], \"featured\")'\n","\"a\\\"b\", \"a'b\", \"a\\\\b\"\n","'a\"b', 'a\\'b'\n"],"headingContent":"JSON Field","anchorList":[{"label":"JSON 欄位","href":"JSON-Field","type":1,"isActive":false},{"label":"什麼是 JSON 欄位？","href":"What-is-a-JSON-field","type":2,"isActive":false},{"label":"在模式中定義 JSON 欄位","href":"Define-a-JSON-field-in-the-schema","type":2,"isActive":false},{"label":"插入具有 JSON 資料的實體","href":"Insert-entities-with-JSON-data","type":2,"isActive":false},{"label":"在 JSON 欄位內索引值Compatible with Milvus 2.5.11+","href":"Index-values-inside-the-JSON-field--Milvus-2511+","type":2,"isActive":false},{"label":"依 JSON 欄位值篩選","href":"Filter-by-JSON-field-values","type":2,"isActive":false},{"label":"將所有內容整合在一起","href":"Pull-it-all-together","type":2,"isActive":false},{"label":"常見問題","href":"FAQ","type":2,"isActive":false}]}