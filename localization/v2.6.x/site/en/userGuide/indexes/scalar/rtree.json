{"codeList":["from pymilvus import MilvusClient\n\nclient = MilvusClient(uri=\"http://localhost:19530\") # Replace with your server address\n\n# Assume you have defined a GEOMETRY field named \"geo\" in your collection schema\n\n# Prepare index parameters\nindex_params = client.prepare_index_params()\n\n# Add RTREE index on the \"geo\" field\n# highlight-start\nindex_params.add_index(\n    field_name=\"geo\",\n    index_type=\"RTREE\",      # Spatial index for GEOMETRY\n    index_name=\"rtree_geo\",  # Optional, name your index\n    params={}                # No extra params needed\n)\n# highlight-end\n\n# Create the index on the collection\nclient.create_index(\n    collection_name=\"geo_demo\",\n    index_params=index_params\n)\n","filter_expr = \"ST_CONTAINS(geo, 'POLYGON ((0 0, 10 0, 10 10, 0 10, 0 0))')\"\n\nres = client.query(\n    collection_name=\"geo_demo\",\n    filter=filter_expr,\n    output_fields=[\"id\", \"geo\"],\n    limit=10\n)\nprint(res)   # Expected: a list of rows where geo is entirely inside the polygon\n","# Assume you've also created an index on \"vec\" and loaded the collection.\nquery_vec = [[0.1, 0.2, 0.3, 0.4, 0.5]]\nfilter_expr = \"ST_INTERSECTS(geo, 'LINESTRING (1 1, 2 2)')\"\n\nhits = client.search(\n    collection_name=\"geo_demo\",\n    data=query_vec,\n    limit=5,\n    filter=filter_expr,\n    output_fields=[\"id\", \"geo\"]\n)\nprint(hits)  # Expected: top-k by vector similarity among rows whose geo intersects the line\n"],"headingContent":"RTREE","anchorList":[{"label":"RTREE","href":"RTREE","type":1,"isActive":false},{"label":"How it works","href":"How-it-works","type":2,"isActive":false},{"label":"Phase 1: Build the index","href":"Phase-1-Build-the-index","type":3,"isActive":false},{"label":"Phase 2: Accelerate queries","href":"Phase-2-Accelerate-queries","type":3,"isActive":false},{"label":"Create an RTREE index","href":"Create-an-RTREE-index","type":2,"isActive":false},{"label":"Query with RTREE","href":"Query-with-RTREE","type":2,"isActive":false},{"label":"Example 1: Filter only","href":"Example-1-Filter-only","type":3,"isActive":false},{"label":"Example 2: Vector search + spatial filter","href":"Example-2-Vector-search-+-spatial-filter","type":3,"isActive":false}]}