{"codeList":["from pymilvus import MilvusClient, DataType\nimport random\n\nCOLLECTION_NAME = \"demo_fp32\"\nDIM = 6\nNUM_ENTITIES = 1000\n\nclient = MilvusClient(uri=\"http://localhost:19530\")\n\nschema = client.create_schema(\n    auto_id=True,\n    enable_dynamic_fields=True,\n)\n\nschema.add_field(field_name=\"id\", datatype=DataType.INT64, is_primary=True)\n# highlight-next-line\nschema.add_field(field_name=\"dense_vector\", datatype=DataType.FLOAT_VECTOR, dim=DIM)\n\nclient.create_collection(\n    collection_name=COLLECTION_NAME,\n    schema=schema,\n)\n\n","from pymilvus import MilvusClient, DataType\nimport numpy as np\nimport random\n\nCOLLECTION_NAME = \"demo_fp16\"\nDIM = 6\nNUM_ENTITIES = 1000\n\nclient = MilvusClient(uri=\"http://localhost:19530\")\n\nschema = client.create_schema(\n    auto_id=True,\n    enable_dynamic_fields=True,\n)\n\nschema.add_field(field_name=\"id\", datatype=DataType.INT64, is_primary=True)\n# highlight-next-line\nschema.add_field(field_name=\"dense_vector\", datatype=DataType.FLOAT16_VECTOR, dim=DIM)\n\nclient.create_collection(\n    collection_name=COLLECTION_NAME,\n    schema=schema,\n)\n\n","from pymilvus import MilvusClient, DataType\nimport numpy as np\nimport ml_dtypes\nimport random\n\nCOLLECTION_NAME = \"demo_bf16\"\nDIM = 6\nNUM_ENTITIES = 1000\n\nclient = MilvusClient(uri=\"http://localhost:19530\")\n\nschema = client.create_schema(\n    auto_id=True,\n    enable_dynamic_fields=True,\n)\n\nschema.add_field(field_name=\"id\", datatype=DataType.INT64, is_primary=True)\n# highlight-next-line\nschema.add_field(field_name=\"dense_vector\", datatype=DataType.BFLOAT16_VECTOR, dim=DIM)\n\nclient.create_collection(\n    collection_name=COLLECTION_NAME,\n    schema=schema,\n)\n\n","from pymilvus import MilvusClient, DataType\nimport numpy as np\nimport random\n\nCOLLECTION_NAME = \"demo_int8\"\nDIM = 6\nNUM_ENTITIES = 1000\n\nclient = MilvusClient(uri=\"http://localhost:19530\")\n\nschema = client.create_schema(\n    auto_id=True,\n    enable_dynamic_fields=True,\n)\n\nschema.add_field(field_name=\"id\", datatype=DataType.INT64, is_primary=True)\n# highlight-next-line\nschema.add_field(field_name=\"dense_vector\", datatype=DataType.INT8_VECTOR, dim=DIM)\n\nclient.create_collection(\n    collection_name=COLLECTION_NAME,\n    schema=schema,\n)\n\n","# Generate random sample data\nsample_data = [\n    {\"dense_vector\": [random.uniform(0, 10) for _ in range(DIM)]}\n    for _ in range(NUM_ENTITIES)\n]\n\nres = client.insert(collection_name=COLLECTION_NAME, data=sample_data)\nprint(f\"Inserted {res['insert_count']} entities\")\n\n# Expected output:\n# Inserted 1000 entities\n\n","# Generate random sample data with float16 precision\nsample_data = [\n    {\"dense_vector\": np.array([random.uniform(0, 10) for _ in range(DIM)], dtype=np.float16)}\n    for _ in range(NUM_ENTITIES)\n]\n\nres = client.insert(collection_name=COLLECTION_NAME, data=sample_data)\nprint(f\"Inserted {res['insert_count']} entities\")\n\n# Expected output:\n# Inserted 1000 entities\n\n","# Generate random sample data with bfloat16 precision\nsample_data = [\n    {\"dense_vector\": np.array([random.uniform(0, 10) for _ in range(DIM)], dtype=ml_dtypes.bfloat16)}\n    for _ in range(NUM_ENTITIES)\n]\n\nres = client.insert(collection_name=COLLECTION_NAME, data=sample_data)\nprint(f\"Inserted {res['insert_count']} entities\")\n\n# Expected output:\n# Inserted 1000 entities\n\n","# Generate random sample data with int8 values (range: -128 to 127)\n# Note: In practice, these should be generated by your quantization workflow\nsample_data = [\n    {\"dense_vector\": np.array([random.randint(-128, 127) for _ in range(DIM)], dtype=np.int8)}\n    for _ in range(NUM_ENTITIES)\n]\n\nres = client.insert(collection_name=COLLECTION_NAME, data=sample_data)\nprint(f\"Inserted {res['insert_count']} entities\")\n\n# Expected output:\n# Inserted 1000 entities\n\n","index_params = client.prepare_index_params()\n\nindex_params.add_index(\n    field_name=\"dense_vector\",\n    index_name=\"dense_vector_index\",\n    # highlight-next-line\n    index_type=\"AUTOINDEX\",\n    metric_type=\"COSINE\"\n)\n\nclient.create_index(\n    collection_name=COLLECTION_NAME,\n    index_params=index_params,\n)\n\n","client.load_collection(collection_name=COLLECTION_NAME)\nprint(client.get_load_state(collection_name=COLLECTION_NAME))\n\n# Expected output:\n# {'state': <LoadState: Loaded>}\n\n","# Generate a random query vector\nquery_vector = [random.uniform(0, 10) for _ in range(DIM)]\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[query_vector],\n    anns_field=\"dense_vector\",\n    limit=5,\n    output_fields=[\"id\", \"dense_vector\"],\n)\n\nprint(\"Search results:\")\nfor hits in results:\n    for hit in hits:\n        print(f\"  ID: {hit['id']}, Distance: {hit['distance']:.4f}, Vector: {hit['entity']['dense_vector']}\")\n\n# Expected output:\n# Query vector: [0.04829983311732566, 7.242046533136467, 4.749595032784661, 6.538280898507523, 2.927369010676787, 7.130210349120606]\n\n# Search results:\n#   ID: 462276891999427419, Distance: 0.9863, Vector: [0.717526912689209, 9.375789642333984, 5.504298210144043, 5.678950786590576, 4.515065670013428, 9.119729042053223]\n#   ID: 462276891999428167, Distance: 0.9858, Vector: [0.3835741877555847, 6.094085693359375, 3.7625980377197266, 3.6146297454833984, 1.652050495147705, 4.706247329711914]\n#   ID: 462276891999427800, Distance: 0.9810, Vector: [2.6610236167907715, 8.234763145446777, 5.404249668121338, 6.806085586547852, 2.198822259902954, 8.617210388183594]\n#   ID: 462276891999428070, Distance: 0.9767, Vector: [0.7160412669181824, 7.404406547546387, 7.226160526275635, 6.292483806610107, 1.1760412454605103, 7.476434230804443]\n#   ID: 462276891999427972, Distance: 0.9763, Vector: [0.7996429204940796, 7.207499027252197, 4.7528157234191895, 8.581534385681152, 3.2311313152313232, 5.160025119781494]\n\n","# Generate a random query vector\nquery_vector = np.array([random.uniform(0, 10) for _ in range(DIM)], dtype=np.float16)\nprint(f\"\\nQuery vector: {query_vector}\\n\")\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[query_vector],\n    anns_field=\"dense_vector\",\n    limit=5,\n    output_fields=[\"id\", \"dense_vector\"],\n)\n\nprint(\"Search results:\")\nfor hits in results:\n    for hit in hits:\n        print(f\"  ID: {hit['id']}, Distance: {hit['distance']:.4f}, Vector: {hit['entity']['dense_vector']}\")\n\n# Expected output:\n# Query vector: [4.133  0.1598 7.348  3.623  2.727  6.88  ]\n\n# Search results:\n#   ID: 462276891999429161, Distance: 0.9921, Vector: b'\\xbeD\\x874\\xabH\\x9eEhC0G'\n#   ID: 462276891999428326, Distance: 0.9874, Vector: b'\\xb9D\\x9a=\\xd4H\\xa2F[D<H'\n#   ID: 462276891999428783, Distance: 0.9824, Vector: b'<F\\xeb:\\x8dG\\xacE7A.G'\n#   ID: 462276891999428366, Distance: 0.9819, Vector: b'\\x15E\\xe3?\\xecG\\xf5D\"@\\xd2H'\n#   ID: 462276891999428808, Distance: 0.9795, Vector: b'RE\\xf8>HH\\x17Fe>\\xe8H'\n\n","# Generate a random query vector\nquery_vector = np.array([random.uniform(0, 10) for _ in range(DIM)], dtype=ml_dtypes.bfloat16)\nprint(f\"\\nQuery vector: {query_vector}\\n\")\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[query_vector],\n    anns_field=\"dense_vector\",\n    limit=5,\n    output_fields=[\"id\", \"dense_vector\"],\n)\n\nprint(\"Search results:\")\nfor hits in results:\n    for hit in hits:\n        # Convert bytes back to numpy bfloat16 array for display\n        vector_bytes = hit['entity']['dense_vector']\n        vector_array = np.frombuffer(vector_bytes, dtype=ml_dtypes.bfloat16)\n        print(f\"  ID: {hit['id']}, Distance: {hit['distance']:.4f}, Vector: {vector_array}\")\n\n# Expected output:\n# Query vector: [2.85938 9 0.761719 8 9 10]\n\n# Search results:\n#   ID: 462276891999429941, Distance: 0.9969, Vector: [1.78125 8 0.121582 6.78125 7.46875 9.5]\n#   ID: 462276891999429646, Distance: 0.9903, Vector: [2.51562 8.5625 0.0224609 7.625 6.875 7.03125]\n#   ID: 462276891999429243, Distance: 0.9888, Vector: [0.253906 7.78125 1.17188 7.15625 8.125 8.1875]\n#   ID: 462276891999429439, Distance: 0.9833, Vector: [3.78125 6.4375 1.96875 4.9375 7.59375 8.4375]\n#   ID: 462276891999429986, Distance: 0.9825, Vector: [1.64062 5.0625 0.0130615 7.15625 8.4375 7.84375]\n\n","# Generate a random query vector (int8 range: -128 to 127)\nquery_vector = np.array([random.randint(-128, 127) for _ in range(DIM)], dtype=np.int8)\nprint(f\"\\nQuery vector: {query_vector}\\n\")\n\nresults = client.search(\n    collection_name=COLLECTION_NAME,\n    data=[query_vector],\n    anns_field=\"dense_vector\",\n    limit=5,\n    output_fields=[\"id\", \"dense_vector\"],\n)\n\nprint(\"Search results:\")\nfor hits in results:\n    for hit in hits:\n        # Convert bytes back to numpy int8 array for display\n        vector_bytes = hit['entity']['dense_vector']\n        vector_array = np.frombuffer(vector_bytes, dtype=np.int8)\n        print(f\"  ID: {hit['id']}, Distance: {hit['distance']:.4f}, Vector: {vector_array}\")\n\n# Expected output:\n# Query vector: [-72 -76 -35 -44  33 103]\n\n# Search results:\n#   ID: 462276891999430363, Distance: 0.9280, Vector: [-118  -84  -14   -6   86  126]\n#   ID: 462276891999430447, Distance: 0.9222, Vector: [-101  -83  -37  -85  -31  125]\n#   ID: 462276891999430628, Distance: 0.9210, Vector: [-47 -61 -33 -99  40  89]\n#   ID: 462276891999430902, Distance: 0.9181, Vector: [-107  -71  -69 -105   62   80]\n#   ID: 462276891999431014, Distance: 0.9179, Vector: [-109 -117  -79  -42   96   79]\n\n"],"headingContent":"Dense Vector","anchorList":[{"label":"Dense Vector","href":"Dense-Vector","type":1,"isActive":false},{"label":"Understand and choose dense vector formats","href":"Understand-and-choose-dense-vector-formats","type":2,"isActive":false},{"label":"How the formats differ","href":"How-the-formats-differ","type":3,"isActive":false},{"label":"Choose the right dense vector format","href":"Choose-the-right-dense-vector-format","type":3,"isActive":false},{"label":"Basic operations","href":"Basic-operations","type":2,"isActive":false},{"label":"1. Define a dense vector field","href":"1-Define-a-dense-vector-field","type":3,"isActive":false},{"label":"2. Insert vector data","href":"2-Insert-vector-data","type":3,"isActive":false},{"label":"3. Create index on dense vector field","href":"3-Create-index-on-dense-vector-field","type":3,"isActive":false},{"label":"4. Semantic search on dense vectors","href":"4-Semantic-search-on-dense-vectors","type":3,"isActive":false},{"label":"Next steps","href":"Next-steps","type":2,"isActive":false},{"label":"FAQ","href":"FAQ","type":2,"isActive":false},{"label":"Can a collection have multiple dense vector fields with different types?","href":"Can-a-collection-have-multiple-dense-vector-fields-with-different-types","type":3,"isActive":false},{"label":"Can I modify the vector type after collection creation?","href":"Can-I-modify-the-vector-type-after-collection-creation","type":3,"isActive":false},{"label":"Does Milvus handle FP32 → FP16 or FP16 → INT8 conversion automatically?","href":"Does-Milvus-handle-FP32-→-FP16-or-FP16-→-INT8-conversion-automatically","type":3,"isActive":false}]}