---
id: using_milvusclient.md
related_key: Milvus Client Python
summary: Learn how to use the MilvusClient Python API.
title: ''
---
<h1 id="Use-the-MilvusClient" class="common-anchor-header">Use the MilvusClient<button data-href="#Use-the-MilvusClient" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h1><p>This page goes over how to use the MilvusClient found in Pymilvus. The MilvusClient is a simplified wrapper around Pymilvus that is easier to use and hides away a majority of the complication found in using the original SDK.</p>
<div class="alert note">
    Ensure that Milvus is running.
</div>
<p>The MilvusClient supports a single unified way of connecting to the service through the use of a URI. A few examples of valid URIs are:</p>
<ol>
<li>“http://localhost:19530”</li>
<li>“https://user:password@mysite:19530”</li>
<li>“https://username:password@in01-12a.aws-us-west-2.vectordb.zillizcloud.com:19538”</li>
</ol>
<p>When using an HTTPS connection we expect a username and password.</p>
<p>Now lets go over a quick example using the MilvusClient</p>
<h2 id="Basics" class="common-anchor-header">Basics<button data-href="#Basics" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><h3 id="Create-the-Client" class="common-anchor-header">Create the Client</h3><p>Most of the information needed to use the Client is provided in the construction call. There are two main use cases for the client, creating a new Milvus collection or using a previously made collection.</p>
<p>If creating a new collection, you must specify the vector_field name as this cannot be parsed from the inserted data. If you want to manually handle the primary field keys for this collection then you must also specify pk_field, otherwise an autogenerated int field will be used. If a collection with the same name exists in the Milvus instance then you must set overwrite to <code translate="no">True</code> to remove the previous collection.</p>
<p>If you want to connect to a previously created collection then the only values that need to be provided are the uri and the collection_name, the rest of the information will be inferred from the collection itself.</p>
<pre><code translate="no" class="language-python"><span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient

client = MilvusClient(
    collection_name=<span class="hljs-string">&quot;qux&quot;</span>,
    uri=<span class="hljs-string">&quot;http://localhost:19530&quot;</span>,
    vector_field=<span class="hljs-string">&quot;float_vector&quot;</span>, 
    <span class="hljs-comment"># pk_field= &quot;id&quot;, # If you wanted to provide your own PK</span>
    overwrite=<span class="hljs-literal">True</span>,
)
<button class="copy-code-btn"></button></code></pre>
<h3 id="Insert-Data" class="common-anchor-header">Insert Data</h3><p>With the MilvusClient created we can begin to insert data. Data is inserted in the form of a list of dictionaries where each dict corresponds to a row in the collection. Each dict must include values for all the columns in the collection, otherwise the insert will throw an exception.</p>
<p>If the client was created on a collection that doesnt exist or overwrite is set to True, the first entry in the list of dicts will be used to construct the schema of the collection. All subsequent inserts will need to contain the same fields as the first dict. If no index parameteres were supplied at construction time, then a default HNSW index will be used to index the data.</p>
<pre><code translate="no" class="language-python">data = [
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;foo&quot;</span>
    },
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;bar&quot;</span>
    },
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">3</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;baz&quot;</span>
    }
]
client.<span class="hljs-title function_">insert_data</span>(data)
<button class="copy-code-btn"></button></code></pre>
<h3 id="Search-the-Data" class="common-anchor-header">Search the Data</h3><p>Once the data has been inserted into Milvus we can proceed to search the collection. The search takes in the search vector/s and how many search results we want (top_k). In addition to this, if you want you can also supply search parameters. Ths search parameters should correspond to the index_parameters if you supplied them at construction time. If not supplied, MilvusClient will use default search parameters.</p>
<pre><code translate="no" class="language-python">res = client.search_data(
    data = [[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>], [<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]],
    top_k = <span class="hljs-number">2</span>,
)
# [[
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;internal_pk_4537&#x27;</span>: <span class="hljs-number">441340318978146436</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;foo&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">5.0</span>},
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;internal_pk_4537&#x27;</span>: <span class="hljs-number">441340318978146437</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">14.0</span>}
# ],
# [
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;internal_pk_4537&#x27;</span>: <span class="hljs-number">441340318978146438</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;baz&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">0.0</span>},
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;internal_pk_4537&#x27;</span>: <span class="hljs-number">441340318978146437</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">27.0</span>}
# ]]
<button class="copy-code-btn"></button></code></pre>
<p>The search results will come in the form of a list of lists. For each search vector, you will recieve a list of dicts, with each dict containing the distance and the corresponding result data. If not all of the data is needed you can adjust what data is returned using the return_fields argument.</p>
<h2 id="Advanced" class="common-anchor-header">Advanced<button data-href="#Advanced" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><h3 id="Partitions" class="common-anchor-header">Partitions</h3><p>The MilvusClient supports partitions in its current release. Partitions can be specified both at MilvusClient construction and later on. Here is a quick example on using the partitions functionality.</p>
<pre><code translate="no" class="language-python">from pymilvus <span class="hljs-keyword">import</span> MilvusClient


client = MilvusClient(
    collection_name=<span class="hljs-string">&quot;qux&quot;</span>,
    uri=<span class="hljs-string">&quot;http://localhost:19530&quot;</span>,
    vector_field=<span class="hljs-string">&quot;float_vector&quot;</span>,
    partitions = [<span class="hljs-string">&quot;zaz&quot;</span>],
    overwrite=True,
)

data = [
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;foo&quot;</span>
    },
]
client.insert_data(data, partition=<span class="hljs-string">&quot;zaz&quot;</span>)

client.add_partitions([<span class="hljs-string">&quot;zoo&quot;</span>])

data = [
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;bar&quot;</span>
    },
]
client.insert_data(data, partition=<span class="hljs-string">&quot;zoo&quot;</span>)

res = client.search_data(
    data = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>],
    top_k = <span class="hljs-number">2</span>,
)

# [[
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;internal_pk_3bd4&#x27;</span>: <span class="hljs-number">441363276234227849</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;foo&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">5.0</span>},
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;internal_pk_3bd4&#x27;</span>: <span class="hljs-number">441363276234227866</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">14.0</span>}
# ]]


res = client.search_data(
    data = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>],
    top_k = <span class="hljs-number">2</span>,
    partitions=[<span class="hljs-string">&quot;zaz&quot;</span>]
)

# [[
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;internal_pk_3bd4&#x27;</span>: <span class="hljs-number">441363276234227849</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;foo&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">5.0</span>}
# ]]

res = client.search_data(
    data = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>],
    top_k = <span class="hljs-number">2</span>,
    partitions=[<span class="hljs-string">&quot;zoo&quot;</span>]
)

# [[
#     {<span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;internal_pk_3bd4&#x27;</span>: <span class="hljs-number">441363276234227866</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>}, <span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">14.0</span>}
# ]]
<button class="copy-code-btn"></button></code></pre>
<h3 id="Filtering" class="common-anchor-header">Filtering</h3><p>Filtering can be used to narrow down results to match metadata or to query data based on metadata.</p>
<pre><code translate="no" class="language-python">from pymilvus <span class="hljs-keyword">import</span> MilvusClient

client = MilvusClient(
    collection_name=<span class="hljs-string">&quot;qux&quot;</span>,
    uri=<span class="hljs-string">&quot;http://localhost:19530&quot;</span>,
    vector_field=<span class="hljs-string">&quot;float_vector&quot;</span>, 
    # pk_field= <span class="hljs-string">&quot;id&quot;</span>, # If you wanted to provide your own PK
    overwrite=True,
)

data = [
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;foo&quot;</span>
    },
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;bar&quot;</span>
    },
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">3</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;baz&quot;</span>
    }
]
client.insert_data(data)

res = client.search_data(
    data = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>],
    top_k = <span class="hljs-number">2</span>,
    filter_expression = <span class="hljs-string">&quot;id &gt; 1&quot;</span>
)

# [[
#     {<span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">14.0</span>, <span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;internal_pk_5465&#x27;</span>: <span class="hljs-number">441363276234227922</span>}},
#     {<span class="hljs-string">&#x27;score&#x27;</span>: <span class="hljs-number">77.0</span>, <span class="hljs-string">&#x27;data&#x27;</span>: {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;internal_pk_5465&#x27;</span>: <span class="hljs-number">441363276234227923</span>}}
# ]]

res = client.query_data(
    filter_expression = <span class="hljs-string">&quot;id == 1&quot;</span>
)

# [
#   {<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;text&#x27;</span>: <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;internal_pk_5465&#x27;</span>: <span class="hljs-number">441363276234227921</span>}
# ]
<button class="copy-code-btn"></button></code></pre>
<h3 id="Vector-Retrieval-and-Deletion" class="common-anchor-header">Vector Retrieval and Deletion</h3><p>As a vector database we have the ability to return the actual vectors and delete their entries. In order to do these two functions we need to first get the pks corresponding to the entry we are trying to act on. Here is an example below.</p>
<pre><code translate="no" class="language-python"><span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> MilvusClient

client = MilvusClient(
    collection_name=<span class="hljs-string">&quot;qux&quot;</span>,
    uri=<span class="hljs-string">&quot;http://localhost:19530&quot;</span>,
    vector_field=<span class="hljs-string">&quot;float_vector&quot;</span>, 
    pk_field= <span class="hljs-string">&quot;text&quot;</span>, 
    overwrite=<span class="hljs-literal">True</span>,
)

data = [
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;foo&quot;</span>
    },
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;bar&quot;</span>
    },
    {
        <span class="hljs-string">&quot;float_vector&quot;</span>: [<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>],
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">3</span>,
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;baz&quot;</span>
    }
]

client.insert_data(data)

res = client.query_data(
    filter_expression = <span class="hljs-string">&quot;id == 1&quot;</span>
)

<span class="hljs-comment"># [</span>
<span class="hljs-comment">#   {&#x27;id&#x27;: 1, &#x27;text&#x27;: &#x27;foo&#x27;}</span>
<span class="hljs-comment"># ]</span>

res = client.get_vectors_by_pk(pks = res[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;text&quot;</span>])

<span class="hljs-comment"># [</span>
<span class="hljs-comment">#     {&#x27;float_vector&#x27;: [1.0, 2.0, 3.0], &#x27;text&#x27;: &#x27;foo&#x27;}</span>
<span class="hljs-comment"># ]</span>

client.delete_by_pk(pks = res[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;text&quot;</span>])

res = client.query_data(
    filter_expression = <span class="hljs-string">&quot;id == 1&quot;</span>
)

<span class="hljs-comment"># []</span>
<button class="copy-code-btn"></button></code></pre>
